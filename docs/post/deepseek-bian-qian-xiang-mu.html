<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="../favicon.ico"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="è¦å®ç° **æœ¬åœ°å­˜å‚¨ä¾¿ç­¾ + GitHub åŒæ­¥** ä»¥åŠ **å±‚çº§åŒ–æŠ˜å çš„ä¾¿ç­¾ç»“æ„**ï¼Œå¯ä»¥ç»“åˆ **æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorage/IndexedDBï¼‰** å’Œ **GitHub API**ï¼Œå¹¶ä½¿ç”¨ç±»ä¼¼ä¹¦ç­¾çš„ **æ ‘å½¢ç»“æ„ + æŠ˜å é€»è¾‘**ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´æ–¹æ¡ˆï¼š

---

## **1\. ä¾¿ç­¾æœ¬åœ°å­˜å‚¨ + GitHub åŒæ­¥**

### **(1) æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorage/IndexedDBï¼‰**

ä½¿ç”¨ `localStorage` å­˜å‚¨ä¾¿ç­¾æ•°æ®ï¼ˆé€‚åˆå°å‹æ•°æ®ï¼‰ï¼š

```markdown
// ä¿å­˜ä¾¿ç­¾åˆ° localStorage
function saveNotesToLocal(notes) {
  localStorage.setItem('notes', JSON.stringify(notes));
}

// ä» localStorage åŠ è½½ä¾¿ç­¾
function loadNotesFromLocal() {
  const notes = localStorage.getItem('notes');
  return notes ? JSON.parse(notes) : [];
}
```

**ï¼ˆå¦‚æœæ•°æ®é‡å¤§ï¼Œæ”¹ç”¨ `IndexedDB` å­˜å‚¨ï¼‰**

---

### **(2) GitHub åŒæ­¥**

ä½¿ç”¨ **GitHub API** æˆ– **GitHub Pages + æ‰‹åŠ¨åŒæ­¥**ï¼š

#### **æ–¹æ¡ˆ Aï¼šGitHub APIï¼ˆè‡ªåŠ¨åŒæ­¥ï¼‰**

```markdown
async function syncToGitHub(notes, repoPath = 'data/notes.json') {
  const token = 'YOUR_GITHUB_TOKEN'; // ä¸ªäººè®¿é—®ä»¤ç‰Œ
  const repo = 'your-username/your-repo';
  const url = `https://api.github.com/repos/${repo}/contents/${repoPath}`;

  // è·å–æ–‡ä»¶ SHAï¼ˆå¦‚æœå·²å­˜åœ¨ï¼‰
  const { sha } = await fetch(url, {
    headers: { Authorization: `token ${token}` },
  }).then(res => res.json());

  // æ›´æ–°æ–‡ä»¶
  await fetch(url, {
    method: 'PUT',
    headers: { Authorization: `token ${token}` },
    body: JSON.stringify({
      message: 'Update notes',
      content: btoa(JSON.stringify(notes)), // Base64 ç¼–ç 
      sha, // ç”¨äºè¦†ç›–ç°æœ‰æ–‡ä»¶
    }),
  });
}
```

#### **æ–¹æ¡ˆ Bï¼šGitHub Pages + æ‰‹åŠ¨ä¸‹è½½/ä¸Šä¼ **

1.  åœ¨ GitHub ä»“åº“å­˜å‚¨ `notes.json`
2.  ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡» **'å¯¼å‡ºåˆ° GitHub'** ä¸Šä¼ 
3.  æ‰‹åŠ¨ç‚¹å‡» **'ä» GitHub å¯¼å…¥'** ä¸‹è½½

---

## **2\. å±‚çº§åŒ–ä¾¿ç­¾ç»“æ„ï¼ˆç±»ä¼¼ä¹¦ç­¾ï¼‰**

### **(1) æ•°æ®ç»“æ„**

```markdown
const notes = [
  {
    id: '1',
    title: 'å·¥ä½œ',
    type: 'folder',
    children: [
      {
        id: '1-1',
        title: 'é¡¹ç›®A',
        type: 'note',
        content: 'å¾…åŠäº‹é¡¹...',
      },
      {
        id: '1-2',
        title: 'ä¼šè®®è®°å½•',
        type: 'folder',
        children: [...],
      },
    ],
    isOpen: true, // æ§åˆ¶æŠ˜å 
  },
  {
    id: '2',
    title: 'ä¸ªäºº',
    type: 'folder',
    isOpen: false,
    children: [...],
  },
];
```

### **(2) æŠ˜å é€»è¾‘ï¼ˆç±»ä¼¼ä¹¦ç­¾ï¼‰**

**HTML ç»“æ„**ï¼š

```markdown
<div class='note-tree'>
  <div class='note-folder' data-id='1'>
    <div class='folder-header' onclick='toggleFolder('1')'>
      <span>ğŸ“ å·¥ä½œ</span>
      <span class='toggle-icon'>â–¶</span>
    </div>
    <div class='folder-children'>
      <!-- å­ä¾¿ç­¾æˆ–æ–‡ä»¶å¤¹ -->
    </div>
  </div>
</div>
```

**CSS æŠ˜å åŠ¨ç”»**ï¼š

```markdown
.note-folder .folder-children {
  display: none;
  padding-left: 20px;
}

.note-folder.open .folder-children {
  display: block;
}

.note-folder.open .toggle-icon {
  transform: rotate(90deg);
}
```

**JavaScript æŠ˜å æ§åˆ¶**ï¼š

```markdown
function toggleFolder(id) {
  const folder = document.querySelector(`.note-folder[data-id='${id}']`);
  folder.classList.toggle('open');

  // æ›´æ–°æ•°æ®ä¸­çš„ isOpen çŠ¶æ€
  updateNoteInData(id, { isOpen: folder.classList.contains('open') });
}
```

### **(3) æŠ˜å æ’æ–¥é€»è¾‘ï¼ˆå…„å¼Ÿçº§/å­å­™çº§ï¼‰**

```markdown
function closeSiblingsAndChildren(folderId) {
  // å…³é—­æ‰€æœ‰å…„å¼Ÿæ–‡ä»¶å¤¹
  const parentFolder = document.querySelector(`.note-folder[data-id='${folderId}']`).parentElement.closest('.note-folder');
  if (parentFolder) {
    parentFolder.querySelectorAll('.note-folder').forEach(f => {
      if (f.dataset.id !== folderId) {
        f.classList.remove('open');
      }
    });
  }

  // å…³é—­æ‰€æœ‰å­æ–‡ä»¶å¤¹
  document.querySelectorAll(`.note-folder[data-id^='${folderId}-']`).forEach(f => {
    f.classList.remove('open');
  });
}
```

---

## **3\. å®Œæ•´æµç¨‹**

1.  **ç”¨æˆ·æ“ä½œ**ï¼š

    - æ–°å¢/ç¼–è¾‘ä¾¿ç­¾ â†’ ä¿å­˜åˆ° `localStorage`
    - ç‚¹å‡» **'åŒæ­¥åˆ° GitHub'** â†’ è°ƒç”¨ `syncToGitHub()`
    - ç‚¹å‡»æ–‡ä»¶å¤¹ â†’ æŠ˜å /å±•å¼€ï¼Œå¹¶æ’æ–¥å…„å¼Ÿçº§å’Œå­çº§

2.  **åˆå§‹åŒ–åŠ è½½**ï¼š

    ```markdown
    // ä» localStorage æˆ– GitHub åŠ è½½æ•°æ®
    let notes = loadNotesFromLocal();
    renderNoteTree(notes);
    ```

3.  **GitHub åŒæ­¥**ï¼š

    - ç”¨æˆ·æ‰‹åŠ¨è§¦å‘åŒæ­¥
    - æˆ–è®¾ç½®å®šæ—¶è‡ªåŠ¨åŒæ­¥ï¼ˆéœ€è€ƒè™‘å†²çªå¤„ç†ï¼‰

---

## **4\. é¢å¤–ä¼˜åŒ–**

- **å†²çªå¤„ç†**ï¼šå¦‚æœæœ¬åœ°å’Œè¿œç¨‹æ•°æ®ä¸åŒï¼Œæç¤ºç”¨æˆ·é€‰æ‹©ç‰ˆæœ¬
- **ç¦»çº¿æ¨¡å¼**ï¼šä¼˜å…ˆä½¿ç”¨ `localStorage`ï¼Œè”ç½‘æ—¶å†åŒæ­¥
- **IndexedDB**ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œæ”¹ç”¨ IndexedDB å­˜å‚¨

---

### **æœ€ç»ˆæ•ˆæœ**

âœ… **æœ¬åœ°å­˜å‚¨**ï¼ˆåˆ·æ–°ä¸ä¸¢å¤±ï¼‰  
âœ… **GitHub åŒæ­¥**ï¼ˆè·¨è®¾å¤‡è®¿é—®ï¼‰  
âœ… **å±‚çº§åŒ–ä¾¿ç­¾**ï¼ˆæ–‡ä»¶å¤¹ + æŠ˜å ï¼‰  
âœ… **æ™ºèƒ½æŠ˜å **ï¼ˆæ’æ–¥å…„å¼Ÿ/å­çº§ï¼‰

ä½ å¯ä»¥åŸºäºè¿™ä¸ªæ–¹æ¡ˆå®ç°ä¸€ä¸ªå®Œæ•´çš„ **ä¾¿ç­¾ç®¡ç†åº”ç”¨**ï¼ ğŸš€

# å¯ä»¥ç”Ÿæˆä¿®æ”¹åçš„notesPluginå®Œæ•´ä»£ç å—ï¼Ÿ

## å®Œæ•´ Notes Plugin ä»£ç ï¼ˆGitHub API åŒæ­¥ï¼‰

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¾¿ç­¾æ’ä»¶å®ç°ï¼ŒåŒ…å«æœ¬åœ°å­˜å‚¨ã€GitHub åŒæ­¥ã€å±‚çº§åŒ–ç»“æ„å’ŒæŠ˜å åŠŸèƒ½ã€‚

## 1\. HTML ç»“æ„ (index.html)

```markdown
<!DOCTYPE html>
<html lang='zh-CN'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>æ™ºèƒ½ä¾¿ç­¾ç®¡ç†</title>
    <link rel='stylesheet' href='style.css'>
</head>
<body>
    <div id='app-container'>
        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <div id='top-toolbar'>
            <div class='header-left'>
                <img id='logo' src='icon.png' alt='Logo'>
                <h1>æ™ºèƒ½ä¾¿ç­¾</h1>
            </div>
            <div class='header-right'>
                <button id='add-folder-btn' class='toolbar-button'>ğŸ“ æ–°å»ºæ–‡ä»¶å¤¹</button>
                <button id='add-note-btn' class='toolbar-button'>ğŸ“ æ–°å»ºä¾¿ç­¾</button>
                <button id='sync-github-btn' class='toolbar-button'>ğŸ”„ åŒæ­¥åˆ° GitHub</button>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <main>
            <section class='active'>
                <div id='notes-container'>
                    <!-- ä¾¿ç­¾æ ‘å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                </div>
            </section>
        </main>

        <!-- åº•éƒ¨å·¥å…·æ  -->
        <div id='bottom-toolbar'>
            <div class='footer-tabs'>
                <button class='tab-button active'>ğŸ“‹ æ‰€æœ‰ä¾¿ç­¾</button>
                <button class='tab-button'>â­ æ”¶è—</button>
            </div>
        </div>

        <!-- ç¼–è¾‘æ¨¡æ€æ¡† -->
        <div id='edit-modal' class='modal hidden'>
            <div class='modal-content'>
                <h2>ç¼–è¾‘ä¾¿ç­¾</h2>
                <input type='text' id='edit-title' placeholder='æ ‡é¢˜'>
                <textarea id='edit-content' placeholder='å†…å®¹...'></textarea>
                <div class='modal-actions'>
                    <button id='save-edit-btn'>ä¿å­˜</button>
                    <button id='cancel-edit-btn'>å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script src='notesPlugin.js'></script>
</body>
</html>
```

## 2\. CSS æ ·å¼ (style.css)

```markdown
/* åŸºç¡€æ ·å¼ */
body {
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
    background-color: #f5f5f5;
    color: #333;
    margin: 0;
    padding: 0;
}

#app-container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* å·¥å…·æ æ ·å¼ */
#top-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 30px;
    background-color: #333;
    color: white;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.header-left, .header-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

#logo {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.toolbar-button {
    border: none;
    color: #ddd;
    background: none;
    padding: 8px 12px;
    font-size: 14px;
    cursor: pointer;
    border-radius: 4px;
}

.toolbar-button:hover {
    background-color: #444;
}

#bottom-toolbar {
    padding: 8px 0;
    background-color: #333;
    margin-top: auto;
}

.footer-tabs {
    display: flex;
    justify-content: center;
}

.tab-button {
    border: none;
    color: #ddd;
    background: none;
    padding: 8px 16px;
    cursor: pointer;
}

.tab-button.active {
    color: white;
    font-weight: bold;
}

/* ä¾¿ç­¾æ ‘æ ·å¼ */
#notes-container {
    padding: 20px;
    background-color: white;
    border-radius: 8px;
    margin: 20px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.note-item {
    margin-bottom: 10px;
}

.folder-header {
    padding: 8px 12px;
    background-color: #f0f0f0;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
}

.folder-header:hover {
    background-color: #e0e0e0;
}

.folder-header .toggle-icon {
    transition: transform 0.2s;
}

.folder-header.open .toggle-icon {
    transform: rotate(90deg);
}

.folder-children {
    padding-left: 20px;
    display: none;
}

.folder-item.open > .folder-children {
    display: block;
}

.note-content {
    padding: 8px 12px;
    background-color: #f9f9f9;
    border-radius: 4px;
    margin-top: 4px;
    cursor: pointer;
}

.note-content:hover {
    background-color: #f0f0f0;
}

/* æ¨¡æ€æ¡†æ ·å¼ */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    width: 80%;
    max-width: 500px;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.modal-actions button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#save-edit-btn {
    background-color: #4CAF50;
    color: white;
}

#cancel-edit-btn {
    background-color: #f44336;
    color: white;
}

.hidden {
    display: none !important;
}
```

## 3\. JavaScript å®ç° (notesPlugin.js)

```markdown
class NotesPlugin {
    constructor() {
        this.notes = [];
        this.currentEditId = null;
        this.githubToken = null;
        this.githubRepo = null;
        this.githubFilePath = 'data/notes.json';

        this.initElements();
        this.loadNotes();
        this.renderNotes();
        this.setupEventListeners();
    }

    initElements() {
        this.notesContainer = document.getElementById('notes-container');
        this.addFolderBtn = document.getElementById('add-folder-btn');
        this.addNoteBtn = document.getElementById('add-note-btn');
        this.syncGithubBtn = document.getElementById('sync-github-btn');
        this.editModal = document.getElementById('edit-modal');
        this.editTitle = document.getElementById('edit-title');
        this.editContent = document.getElementById('edit-content');
        this.saveEditBtn = document.getElementById('save-edit-btn');
        this.cancelEditBtn = document.getElementById('cancel-edit-btn');
    }

    setupEventListeners() {
        this.addFolderBtn.addEventListener('click', () => this.addNewFolder());
        this.addNoteBtn.addEventListener('click', () => this.addNewNote());
        this.syncGithubBtn.addEventListener('click', () => this.syncWithGitHub());
        this.saveEditBtn.addEventListener('click', () => this.saveEdit());
        this.cancelEditBtn.addEventListener('click', () => this.closeEditModal());

        // é¦–æ¬¡ä½¿ç”¨æ—¶è®¾ç½® GitHub ä¿¡æ¯
        if (!localStorage.getItem('githubConfigured')) {
            this.promptGitHubConfig();
        }
    }

    promptGitHubConfig() {
        const token = prompt('è¯·è¾“å…¥ GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œ (Personal Access Token):');
        const repo = prompt('è¯·è¾“å…¥ GitHub ä»“åº“ (æ ¼å¼: username/repo):');

        if (token && repo) {
            this.githubToken = token;
            this.githubRepo = repo;
            localStorage.setItem('githubToken', token);
            localStorage.setItem('githubRepo', repo);
            localStorage.setItem('githubConfigured', 'true');
            alert('GitHub é…ç½®å·²ä¿å­˜ï¼');
        }
    }

    // æ•°æ®å­˜å‚¨æ–¹æ³•
    loadNotes() {
        // ä» localStorage åŠ è½½
        const localNotes = localStorage.getItem('notes');
        if (localNotes) {
            this.notes = JSON.parse(localNotes);
            return;
        }

        // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
        this.notes = [
            {
                id: '1',
                title: 'å·¥ä½œ',
                type: 'folder',
                children: [
                    {
                        id: '1-1',
                        title: 'é¡¹ç›®A',
                        type: 'note',
                        content: 'é¡¹ç›®Açš„ä»»åŠ¡åˆ—è¡¨...'
                    }
                ],
                isOpen: true
            },
            {
                id: '2',
                title: 'ä¸ªäºº',
                type: 'folder',
                children: [],
                isOpen: false
            }
        ];

        this.saveNotesToLocal();
    }

    saveNotesToLocal() {
        localStorage.setItem('notes', JSON.stringify(this.notes));
    }

    // GitHub åŒæ­¥æ–¹æ³•
    async syncWithGitHub() {
        if (!this.githubToken || !this.githubRepo) {
            this.promptGitHubConfig();
            return;
        }

        try {
            // 1. å°è¯•è·å–ç°æœ‰æ–‡ä»¶ SHA
            const sha = await this.getGitHubFileSHA();

            // 2. ä¸Šä¼ æ–°å†…å®¹
            await this.uploadToGitHub(sha);

            alert('åŒæ­¥åˆ° GitHub æˆåŠŸï¼');
        } catch (error) {
            console.error('åŒæ­¥å¤±è´¥:', error);
            alert(`åŒæ­¥å¤±è´¥: ${error.message}`);
        }
    }

    async getGitHubFileSHA() {
        const url = `https://api.github.com/repos/${this.githubRepo}/contents/${this.githubFilePath}`;
        const response = await fetch(url, {
            headers: {
                'Authorization': `token ${this.githubToken}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        if (response.status === 404) {
            return null; // æ–‡ä»¶ä¸å­˜åœ¨
        }

        if (!response.ok) {
            throw new Error(`è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥: ${response.status}`);
        }

        const data = await response.json();
        return data.sha;
    }

    async uploadToGitHub(sha) {
        const url = `https://api.github.com/repos/${this.githubRepo}/contents/${this.githubFilePath}`;
        const content = btoa(unescape(encodeURIComponent(JSON.stringify(this.notes, null, 2)));

        const response = await fetch(url, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${this.githubToken}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Update notes via web app',
                content: content,
                sha: sha || undefined
            })
        });

        if (!response.ok) {
            throw new Error(`ä¸Šä¼ å¤±è´¥: ${response.status}`);
        }
    }

    // ä¾¿ç­¾æ“ä½œæ–¹æ³•
    addNewFolder(parentId = null) {
        const newFolder = {
            id: this.generateId(parentId),
            title: 'æ–°å»ºæ–‡ä»¶å¤¹',
            type: 'folder',
            children: [],
            isOpen: true
        };

        if (parentId) {
            const parent = this.findNoteById(parentId);
            if (parent && parent.type === 'folder') {
                parent.children.push(newFolder);
            }
        } else {
            this.notes.push(newFolder);
        }

        this.saveAndRender();
        this.editNote(newFolder.id);
    }

    addNewNote(parentId = null) {
        const newNote = {
            id: this.generateId(parentId),
            title: 'æ–°å»ºä¾¿ç­¾',
            type: 'note',
            content: ''
        };

        if (parentId) {
            const parent = this.findNoteById(parentId);
            if (parent && parent.type === 'folder') {
                parent.children.push(newNote);
            }
        } else {
            this.notes.push(newNote);
        }

        this.saveAndRender();
        this.editNote(newNote.id);
    }

    generateId(parentId = null) {
        const timestamp = Date.now().toString(36);
        const random = Math.random().toString(36).substring(2, 6);
        return parentId ? `${parentId}-${timestamp}${random}` : `${timestamp}${random}`;
    }

    findNoteById(id, notes = this.notes) {
        for (const note of notes) {
            if (note.id === id) return note;
            if (note.type === 'folder' && note.children) {
                const found = this.findNoteById(id, note.children);
                if (found) return found;
            }
        }
        return null;
    }

    // æ¸²æŸ“æ–¹æ³•
    renderNotes() {
        this.notesContainer.innerHTML = '';
        this.notes.forEach(note => this.renderNoteItem(note));
    }

    renderNoteItem(note, depth = 0) {
        const item = document.createElement('div');
        item.className = `note-item ${note.type}-item`;
        item.dataset.id = note.id;

        if (note.type === 'folder') {
            item.innerHTML = `
                <div class='folder-header ${note.isOpen ? 'open' : ''}' onclick='notesPlugin.toggleFolder('${note.id}')'>
                    <span class='toggle-icon'>â–¶</span>
                    <span class='folder-title'>ğŸ“ ${note.title}</span>
                    <button class='add-note-btn' onclick='notesPlugin.addNewNote('${note.id}'); event.stopPropagation()'>+</button>
                    <button class='edit-btn' onclick='notesPlugin.editNote('${note.id}'); event.stopPropagation()'>âœï¸</button>
                    <button class='delete-btn' onclick='notesPlugin.deleteNote('${note.id}'); event.stopPropagation()'>ğŸ—‘ï¸</button>
                </div>
                <div class='folder-children' style='display: ${note.isOpen ? 'block' : 'none'}'>
                    ${note.children.map(child => this.renderNoteItem(child, depth + 1).outerHTML).join('')}
                </div>
            `;
        } else {
            item.innerHTML = `
                <div class='note-content' onclick='notesPlugin.editNote('${note.id}')'>
                    <strong>ğŸ“ ${note.title}</strong>
                    <p>${note.content.substring(0, 50)}${note.content.length > 50 ? '...' : ''}</p>
                </div>
            `;
        }

        return item;
    }

    // äº¤äº’æ–¹æ³•
    toggleFolder(id) {
        const note = this.findNoteById(id);
        if (note && note.type === 'folder') {
            note.isOpen = !note.isOpen;
            this.saveAndRender();
        }
    }

    editNote(id) {
        const note = this.findNoteById(id);
        if (!note) return;

        this.currentEditId = id;
        this.editTitle.value = note.title;
        this.editContent.value = note.type === 'note' ? note.content : '';
        this.editModal.classList.remove('hidden');
    }

    saveEdit() {
        const note = this.findNoteById(this.currentEditId);
        if (!note) return;

        note.title = this.editTitle.value;
        if (note.type === 'note') {
            note.content = this.editContent.value;
        }

        this.closeEditModal();
        this.saveAndRender();
    }

    closeEditModal() {
        this.editModal.classList.add('hidden');
        this.currentEditId = null;
    }

    deleteNote(id) {
        if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿ')) return;

        // ä»æ ¹æ•°ç»„æˆ–çˆ¶æ–‡ä»¶å¤¹ä¸­åˆ é™¤
        const deleteFromArray = (array) => {
            const index = array.findIndex(n => n.id === id);
            if (index !== -1) {
                array.splice(index, 1);
                return true;
            }

            for (const item of array) {
                if (item.type === 'folder' && item.children) {
                    if (deleteFromArray(item.children)) {
                        return true;
                    }
                }
            }

            return false;
        };

        if (deleteFromArray(this.notes)) {
            this.saveAndRender();
        }
    }

    saveAndRender() {
        this.saveNotesToLocal();
        this.renderNotes();
    }
}

// åˆå§‹åŒ–æ’ä»¶
const notesPlugin = new NotesPlugin();
window.notesPlugin = notesPlugin; // æš´éœ²ç»™å…¨å±€ä»¥ä¾¿HTMLè°ƒç”¨
```

## åŠŸèƒ½è¯´æ˜

1.  **æœ¬åœ°å­˜å‚¨**ï¼š

    - ä½¿ç”¨ `localStorage` ä¿å­˜ä¾¿ç­¾æ•°æ®
    - æ”¯æŒæ–‡ä»¶å¤¹å’Œä¾¿ç­¾ä¸¤ç§ç±»å‹
    - è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ›´æ”¹

2.  **GitHub åŒæ­¥**ï¼š

    - ä½¿ç”¨ GitHub API åŒæ­¥æ•°æ®
    - éœ€è¦é…ç½® GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œå’Œä»“åº“
    - è‡ªåŠ¨å¤„ç†æ–‡ä»¶åˆ›å»ºå’Œæ›´æ–°

3.  **å±‚çº§ç»“æ„**ï¼š

    - æ”¯æŒæ— é™å±‚çº§åµŒå¥—
    - æ–‡ä»¶å¤¹å¯ä»¥åŒ…å«å…¶ä»–æ–‡ä»¶å¤¹æˆ–ä¾¿ç­¾
    - æ¯ä¸ªé¡¹ç›®æœ‰å”¯ä¸€ ID

4.  **æŠ˜å åŠŸèƒ½**ï¼š

    - ç‚¹å‡»æ–‡ä»¶å¤¹æ ‡é¢˜åˆ‡æ¢å±•å¼€/æŠ˜å çŠ¶æ€
    - ä¿å­˜æŠ˜å çŠ¶æ€
    - æ”¯æŒåœ¨æ–‡ä»¶å¤¹å†…æ–°å»ºé¡¹ç›®

5.  **ç¼–è¾‘åŠŸèƒ½**ï¼š

    - åŒå‡»é¡¹ç›®æˆ–ç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
    - å®æ—¶ä¿å­˜æ›´æ”¹

6.  **UI äº¤äº’**ï¼š

    - å“åº”å¼è®¾è®¡
    - æ¸…æ™°çš„è§†è§‰å±‚æ¬¡
    - æ“ä½œæŒ‰é’®ç›´è§‚

## ä½¿ç”¨è¯´æ˜

1.  é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦é…ç½® GitHub ä¿¡æ¯ï¼ˆä»¤ç‰Œå’Œä»“åº“ï¼‰
2.  ç‚¹å‡»'æ–°å»ºæ–‡ä»¶å¤¹'æˆ–'æ–°å»ºä¾¿ç­¾'æ·»åŠ é¡¹ç›®
3.  ç‚¹å‡»æ–‡ä»¶å¤¹æ ‡é¢˜å±•å¼€/æŠ˜å 
4.  ç‚¹å‡»ä¾¿ç­¾å†…å®¹è¿›è¡Œç¼–è¾‘
5.  ä½¿ç”¨'åŒæ­¥åˆ° GitHub'æŒ‰é’®æ‰‹åŠ¨åŒæ­¥æ•°æ®

è¿™ä¸ªå®ç°æä¾›äº†å®Œæ•´çš„ä¾¿ç­¾ç®¡ç†åŠŸèƒ½ï¼Œé€‚åˆä¸ªäººä½¿ç”¨æˆ–å°å‹å›¢é˜Ÿåä½œã€‚

è¿™æ˜¯ç‹¬ç«‹é¡¹ç›®è¿˜æ˜¯å¯ä»¥èå…¥åŸæ¥ä¹¦ç­¾é¡¹ç›®çš„æ’ä»¶ï¼Ÿå…·ä½“å¦‚ä½•ä½¿ç”¨ï¼Ÿ

è¿™ä¸ªå®ç°æ—¢å¯ä»¥ä½œä¸ºç‹¬ç«‹é¡¹ç›®è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ’ä»¶é›†æˆåˆ°åŸæœ‰çš„ä¹¦ç­¾ç®¡ç†é¡¹ç›®ä¸­ã€‚ä»¥ä¸‹æ˜¯å…·ä½“çš„ä½¿ç”¨æ–¹å¼å’Œé›†æˆæ–¹æ³•ï¼š

---

## **1\. ä½œä¸ºç‹¬ç«‹é¡¹ç›®ä½¿ç”¨**

### **ä½¿ç”¨æ­¥éª¤**

1.  **åˆ›å»ºé¡¹ç›®æ–‡ä»¶**ï¼š

    - `index.html` (ä¸»é¡µé¢)
    - `style.css` (æ ·å¼)
    - `notesPlugin.js` (æ ¸å¿ƒé€»è¾‘)
    - `icon.png` (å¯é€‰ï¼Œå·¥å…·æ å›¾æ ‡)

2.  **ç›´æ¥è¿è¡Œ**ï¼š

    - æ‰“å¼€ `index.html` å³å¯åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨
    - æ•°æ®ä¼šä¿å­˜åœ¨æµè§ˆå™¨çš„ `localStorage` ä¸­

3.  **é…ç½® GitHub åŒæ­¥**ï¼š

    - é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè¾“å…¥ GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œå’Œä»“åº“ä¿¡æ¯
    - ä¹‹åç‚¹å‡» 'åŒæ­¥åˆ° GitHub' æŒ‰é’®æ‰‹åŠ¨åŒæ­¥

---

## **2\. ä½œä¸ºæ’ä»¶é›†æˆåˆ°åŸæœ‰ä¹¦ç­¾é¡¹ç›®**

### **é›†æˆæ­¥éª¤**

#### **(1) æ–‡ä»¶åˆå¹¶**

1.  **CSS æ•´åˆ**ï¼š

    - å°† `style.css` ä¸­çš„æ ·å¼åˆå¹¶åˆ°åŸé¡¹ç›®çš„ CSS æ–‡ä»¶ä¸­
    - æ³¨æ„é¿å…ç±»åå†²çªï¼ˆå¯ä»¥æ·»åŠ å‰ç¼€å¦‚ `.notes-`ï¼‰

2.  **HTML ç»“æ„**ï¼š

    - åœ¨åŸé¡¹ç›®çš„ HTML ä¸­æ·»åŠ ä¾¿ç­¾çš„å®¹å™¨ï¼š

    ```markdown
    <section id='notes-section'>
      <div id='notes-container'></div>
      <!-- åŸæœ‰ä¹¦ç­¾å†…å®¹ -->
    </section>
    ```

3.  **JavaScript é›†æˆ**ï¼š

    - å°† `notesPlugin.js` åˆå¹¶åˆ°åŸé¡¹ç›®çš„ JS ä¸­
    - æˆ–è€…ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼š

    ```markdown
    import NotesPlugin from './notesPlugin.js';
    const notesPlugin = new NotesPlugin();
    ```

#### **(2) åŠŸèƒ½æ•´åˆ**

1.  **å…±äº«æ•°æ®å­˜å‚¨**ï¼š

    - å¦‚æœåŸé¡¹ç›®å·²ä½¿ç”¨ `localStorage`ï¼Œå¯ä»¥åˆå¹¶å­˜å‚¨ç»“æ„ï¼š

    ```markdown
    // ç¤ºä¾‹åˆå¹¶åçš„æ•°æ®ç»“æ„
    const appData = {
      bookmarks: [...], // åŸæœ‰ä¹¦ç­¾æ•°æ®
      notes: [...]     // æ–°ä¾¿ç­¾æ•°æ®
    };
    ```

2.  **UI æ•´åˆ**ï¼š

    - åœ¨åŸæœ‰å·¥å…·æ æ·»åŠ ä¾¿ç­¾ç›¸å…³æŒ‰é’®ï¼š

    ```markdown
    <button id='show-notes-btn'>ğŸ“ ä¾¿ç­¾</button>
    ```

    - é€šè¿‡äº‹ä»¶åˆ‡æ¢æ˜¾ç¤ºï¼š

    ```markdown
    document.getElementById('show-notes-btn').addEventListener('click', () => {
      document.getElementById('bookmarks-section').classList.add('hidden');
      document.getElementById('notes-section').classList.remove('hidden');
    });
    ```

#### **(3) åŒæ­¥é€»è¾‘å¤ç”¨**

- å¦‚æœåŸé¡¹ç›®å·²æœ‰ GitHub åŒæ­¥åŠŸèƒ½ï¼Œå¯ä»¥å¤ç”¨ API è°ƒç”¨é€»è¾‘ï¼š

```markdown
// å…±äº«åŒæ­¥æ–¹æ³•
async function syncAllToGitHub() {
  await syncBookmarks(); // åŸæœ‰ä¹¦ç­¾åŒæ­¥
  await notesPlugin.syncWithGitHub(); // ä¾¿ç­¾åŒæ­¥
}
```

---

## **3\. å…³é”®é›†æˆç‚¹**

### **(1) æ•°æ®éš”ç¦»**

- **ç‹¬ç«‹å­˜å‚¨**ï¼ˆæ¨èåˆå­¦è€…ï¼‰ï¼š

  ```markdown
  // ä¾¿ç­¾æ•°æ®ç‹¬ç«‹å­˜å‚¨
  localStorage.setItem('notes', JSON.stringify(notes));
  // ä¹¦ç­¾æ•°æ®ç‹¬ç«‹å­˜å‚¨
  localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
  ```

- **ç»Ÿä¸€å­˜å‚¨**ï¼ˆè¿›é˜¶ï¼‰ï¼š

  ```markdown
  const allData = {
    version: 1,
    bookmarks: [...],
    notes: [...]
  };
  localStorage.setItem('appData', JSON.stringify(allData));
  ```

### **(2) æ ·å¼å†²çªå¤„ç†**

åœ¨åŸæœ‰ CSS ä¸­æ·»åŠ å‘½åç©ºé—´ï¼š

```markdown
/* ä¾¿ç­¾ä¸“å±æ ·å¼ */
.notes-container { /*...*/ }
.notes-folder-header { /*...*/ }

/* ä¹¦ç­¾ä¸“å±æ ·å¼ */
.bookmarks-container { /*...*/ }
```

### **(3) äº¤äº’é€»è¾‘**

- **åˆ‡æ¢æ ‡ç­¾é¡µ**ï¼š

  ```markdown
  function showTab(tabName) {
    // éšè—æ‰€æœ‰
    document.querySelectorAll('main > section').forEach(s => {
      s.classList.remove('active');
    });
    // æ˜¾ç¤ºç›®æ ‡
    document.getElementById(`${tabName}-section`).classList.add('active');
  }
  ```

- **å…±äº« GitHub é…ç½®**ï¼š

  ```markdown
  // ä»åŸé¡¹ç›®è¯»å–é…ç½®
  notesPlugin.githubToken = bookmarkApp.githubToken;
  notesPlugin.githubRepo = bookmarkApp.githubRepo;
  ```

---

## **4\. ä½¿ç”¨åœºæ™¯ç¤ºä¾‹**

### **åœºæ™¯1ï¼šå¿«é€Ÿç‹¬ç«‹ä½¿ç”¨**

1.  ä¸‹è½½ä¸‰ä¸ªæ–‡ä»¶ï¼ˆHTML/CSS/JSï¼‰
2.  ç›´æ¥æ‰“å¼€ `index.html`
3.  å¼€å§‹è®°å½•ä¾¿ç­¾ï¼Œæ•°æ®ä¿å­˜åœ¨æœ¬åœ°

### **åœºæ™¯2ï¼šé›†æˆåˆ°ä¹¦ç­¾é¡¹ç›®**

1.  å°†ä¾¿ç­¾ä»£ç åˆå¹¶åˆ°åŸé¡¹ç›®
2.  æ·»åŠ åˆ‡æ¢æŒ‰é’®ï¼š

    ```markdown
    <div class='tab-buttons'>
      <button onclick='showTab('bookmarks')'>ä¹¦ç­¾</button>
      <button onclick='showTab('notes')'>ä¾¿ç­¾</button>
    </div>
    ```

3.  å®ç°æ•°æ®åŒæ­¥è”åŠ¨

---

## **5\. æ³¨æ„äº‹é¡¹**

1.  **GitHub API é™åˆ¶**ï¼š

    - ä¸ªäººè®¿é—®ä»¤ç‰Œéœ€è¦ `repo` æƒé™
    - æ¯å°æ—¶æœ€å¤š 60 æ¬¡ API è°ƒç”¨ï¼ˆæœªè®¤è¯ï¼‰

2.  **ç§»åŠ¨ç«¯é€‚é…**ï¼š

    - ç¡®ä¿æŠ˜å æŒ‰é’®å¤§å°é€‚åˆè§¦æ‘¸æ“ä½œ
    - æ·»åŠ å“åº”å¼å¸ƒå±€ï¼š

    ```markdown
    @media (max-width: 600px) {
      .folder-header { padding: 12px; }
    }
    ```

3.  **æ•°æ®å¤‡ä»½**ï¼š

    - å³ä½¿ä½¿ç”¨ GitHub åŒæ­¥ï¼Œä¹Ÿå»ºè®®å®šæœŸå¯¼å‡ºæœ¬åœ°å¤‡ä»½

4.  **å†²çªå¤„ç†**ï¼š

    - å¦‚æœå¤šè®¾å¤‡åŒæ—¶ç¼–è¾‘ï¼Œå»ºè®®å®ç°ç®€å•çš„ 'æœ€åä¿®æ”¹ä¼˜å…ˆ' ç­–ç•¥

---

é€šè¿‡ä»¥ä¸Šæ–¹å¼ï¼Œä½ å¯ä»¥çµæ´»é€‰æ‹©ç‹¬ç«‹ä½¿ç”¨ä¾¿ç­¾åŠŸèƒ½ï¼Œæˆ–å°†å…¶æ— ç¼é›†æˆåˆ°åŸæœ‰ä¹¦ç­¾ç®¡ç†ç³»ç»Ÿä¸­ã€‚ä¸¤ç§æ–¹å¼å‡ä¿ç•™äº†å®Œæ•´çš„å±‚çº§ç»“æ„å’Œ GitHub åŒæ­¥èƒ½åŠ›ã€‚
$$$$$$$">
<meta property="og:title" content="deepseekä¾¿ç­¾é¡¹ç›®">
<meta property="og:description" content="è¦å®ç° **æœ¬åœ°å­˜å‚¨ä¾¿ç­¾ + GitHub åŒæ­¥** ä»¥åŠ **å±‚çº§åŒ–æŠ˜å çš„ä¾¿ç­¾ç»“æ„**ï¼Œå¯ä»¥ç»“åˆ **æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorage/IndexedDBï¼‰** å’Œ **GitHub API**ï¼Œå¹¶ä½¿ç”¨ç±»ä¼¼ä¹¦ç­¾çš„ **æ ‘å½¢ç»“æ„ + æŠ˜å é€»è¾‘**ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´æ–¹æ¡ˆï¼š

---

## **1\. ä¾¿ç­¾æœ¬åœ°å­˜å‚¨ + GitHub åŒæ­¥**

### **(1) æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorage/IndexedDBï¼‰**

ä½¿ç”¨ `localStorage` å­˜å‚¨ä¾¿ç­¾æ•°æ®ï¼ˆé€‚åˆå°å‹æ•°æ®ï¼‰ï¼š

```markdown
// ä¿å­˜ä¾¿ç­¾åˆ° localStorage
function saveNotesToLocal(notes) {
  localStorage.setItem('notes', JSON.stringify(notes));
}

// ä» localStorage åŠ è½½ä¾¿ç­¾
function loadNotesFromLocal() {
  const notes = localStorage.getItem('notes');
  return notes ? JSON.parse(notes) : [];
}
```

**ï¼ˆå¦‚æœæ•°æ®é‡å¤§ï¼Œæ”¹ç”¨ `IndexedDB` å­˜å‚¨ï¼‰**

---

### **(2) GitHub åŒæ­¥**

ä½¿ç”¨ **GitHub API** æˆ– **GitHub Pages + æ‰‹åŠ¨åŒæ­¥**ï¼š

#### **æ–¹æ¡ˆ Aï¼šGitHub APIï¼ˆè‡ªåŠ¨åŒæ­¥ï¼‰**

```markdown
async function syncToGitHub(notes, repoPath = 'data/notes.json') {
  const token = 'YOUR_GITHUB_TOKEN'; // ä¸ªäººè®¿é—®ä»¤ç‰Œ
  const repo = 'your-username/your-repo';
  const url = `https://api.github.com/repos/${repo}/contents/${repoPath}`;

  // è·å–æ–‡ä»¶ SHAï¼ˆå¦‚æœå·²å­˜åœ¨ï¼‰
  const { sha } = await fetch(url, {
    headers: { Authorization: `token ${token}` },
  }).then(res => res.json());

  // æ›´æ–°æ–‡ä»¶
  await fetch(url, {
    method: 'PUT',
    headers: { Authorization: `token ${token}` },
    body: JSON.stringify({
      message: 'Update notes',
      content: btoa(JSON.stringify(notes)), // Base64 ç¼–ç 
      sha, // ç”¨äºè¦†ç›–ç°æœ‰æ–‡ä»¶
    }),
  });
}
```

#### **æ–¹æ¡ˆ Bï¼šGitHub Pages + æ‰‹åŠ¨ä¸‹è½½/ä¸Šä¼ **

1.  åœ¨ GitHub ä»“åº“å­˜å‚¨ `notes.json`
2.  ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡» **'å¯¼å‡ºåˆ° GitHub'** ä¸Šä¼ 
3.  æ‰‹åŠ¨ç‚¹å‡» **'ä» GitHub å¯¼å…¥'** ä¸‹è½½

---

## **2\. å±‚çº§åŒ–ä¾¿ç­¾ç»“æ„ï¼ˆç±»ä¼¼ä¹¦ç­¾ï¼‰**

### **(1) æ•°æ®ç»“æ„**

```markdown
const notes = [
  {
    id: '1',
    title: 'å·¥ä½œ',
    type: 'folder',
    children: [
      {
        id: '1-1',
        title: 'é¡¹ç›®A',
        type: 'note',
        content: 'å¾…åŠäº‹é¡¹...',
      },
      {
        id: '1-2',
        title: 'ä¼šè®®è®°å½•',
        type: 'folder',
        children: [...],
      },
    ],
    isOpen: true, // æ§åˆ¶æŠ˜å 
  },
  {
    id: '2',
    title: 'ä¸ªäºº',
    type: 'folder',
    isOpen: false,
    children: [...],
  },
];
```

### **(2) æŠ˜å é€»è¾‘ï¼ˆç±»ä¼¼ä¹¦ç­¾ï¼‰**

**HTML ç»“æ„**ï¼š

```markdown
<div class='note-tree'>
  <div class='note-folder' data-id='1'>
    <div class='folder-header' onclick='toggleFolder('1')'>
      <span>ğŸ“ å·¥ä½œ</span>
      <span class='toggle-icon'>â–¶</span>
    </div>
    <div class='folder-children'>
      <!-- å­ä¾¿ç­¾æˆ–æ–‡ä»¶å¤¹ -->
    </div>
  </div>
</div>
```

**CSS æŠ˜å åŠ¨ç”»**ï¼š

```markdown
.note-folder .folder-children {
  display: none;
  padding-left: 20px;
}

.note-folder.open .folder-children {
  display: block;
}

.note-folder.open .toggle-icon {
  transform: rotate(90deg);
}
```

**JavaScript æŠ˜å æ§åˆ¶**ï¼š

```markdown
function toggleFolder(id) {
  const folder = document.querySelector(`.note-folder[data-id='${id}']`);
  folder.classList.toggle('open');

  // æ›´æ–°æ•°æ®ä¸­çš„ isOpen çŠ¶æ€
  updateNoteInData(id, { isOpen: folder.classList.contains('open') });
}
```

### **(3) æŠ˜å æ’æ–¥é€»è¾‘ï¼ˆå…„å¼Ÿçº§/å­å­™çº§ï¼‰**

```markdown
function closeSiblingsAndChildren(folderId) {
  // å…³é—­æ‰€æœ‰å…„å¼Ÿæ–‡ä»¶å¤¹
  const parentFolder = document.querySelector(`.note-folder[data-id='${folderId}']`).parentElement.closest('.note-folder');
  if (parentFolder) {
    parentFolder.querySelectorAll('.note-folder').forEach(f => {
      if (f.dataset.id !== folderId) {
        f.classList.remove('open');
      }
    });
  }

  // å…³é—­æ‰€æœ‰å­æ–‡ä»¶å¤¹
  document.querySelectorAll(`.note-folder[data-id^='${folderId}-']`).forEach(f => {
    f.classList.remove('open');
  });
}
```

---

## **3\. å®Œæ•´æµç¨‹**

1.  **ç”¨æˆ·æ“ä½œ**ï¼š

    - æ–°å¢/ç¼–è¾‘ä¾¿ç­¾ â†’ ä¿å­˜åˆ° `localStorage`
    - ç‚¹å‡» **'åŒæ­¥åˆ° GitHub'** â†’ è°ƒç”¨ `syncToGitHub()`
    - ç‚¹å‡»æ–‡ä»¶å¤¹ â†’ æŠ˜å /å±•å¼€ï¼Œå¹¶æ’æ–¥å…„å¼Ÿçº§å’Œå­çº§

2.  **åˆå§‹åŒ–åŠ è½½**ï¼š

    ```markdown
    // ä» localStorage æˆ– GitHub åŠ è½½æ•°æ®
    let notes = loadNotesFromLocal();
    renderNoteTree(notes);
    ```

3.  **GitHub åŒæ­¥**ï¼š

    - ç”¨æˆ·æ‰‹åŠ¨è§¦å‘åŒæ­¥
    - æˆ–è®¾ç½®å®šæ—¶è‡ªåŠ¨åŒæ­¥ï¼ˆéœ€è€ƒè™‘å†²çªå¤„ç†ï¼‰

---

## **4\. é¢å¤–ä¼˜åŒ–**

- **å†²çªå¤„ç†**ï¼šå¦‚æœæœ¬åœ°å’Œè¿œç¨‹æ•°æ®ä¸åŒï¼Œæç¤ºç”¨æˆ·é€‰æ‹©ç‰ˆæœ¬
- **ç¦»çº¿æ¨¡å¼**ï¼šä¼˜å…ˆä½¿ç”¨ `localStorage`ï¼Œè”ç½‘æ—¶å†åŒæ­¥
- **IndexedDB**ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œæ”¹ç”¨ IndexedDB å­˜å‚¨

---

### **æœ€ç»ˆæ•ˆæœ**

âœ… **æœ¬åœ°å­˜å‚¨**ï¼ˆåˆ·æ–°ä¸ä¸¢å¤±ï¼‰  
âœ… **GitHub åŒæ­¥**ï¼ˆè·¨è®¾å¤‡è®¿é—®ï¼‰  
âœ… **å±‚çº§åŒ–ä¾¿ç­¾**ï¼ˆæ–‡ä»¶å¤¹ + æŠ˜å ï¼‰  
âœ… **æ™ºèƒ½æŠ˜å **ï¼ˆæ’æ–¥å…„å¼Ÿ/å­çº§ï¼‰

ä½ å¯ä»¥åŸºäºè¿™ä¸ªæ–¹æ¡ˆå®ç°ä¸€ä¸ªå®Œæ•´çš„ **ä¾¿ç­¾ç®¡ç†åº”ç”¨**ï¼ ğŸš€

# å¯ä»¥ç”Ÿæˆä¿®æ”¹åçš„notesPluginå®Œæ•´ä»£ç å—ï¼Ÿ

## å®Œæ•´ Notes Plugin ä»£ç ï¼ˆGitHub API åŒæ­¥ï¼‰

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¾¿ç­¾æ’ä»¶å®ç°ï¼ŒåŒ…å«æœ¬åœ°å­˜å‚¨ã€GitHub åŒæ­¥ã€å±‚çº§åŒ–ç»“æ„å’ŒæŠ˜å åŠŸèƒ½ã€‚

## 1\. HTML ç»“æ„ (index.html)

```markdown
<!DOCTYPE html>
<html lang='zh-CN'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>æ™ºèƒ½ä¾¿ç­¾ç®¡ç†</title>
    <link rel='stylesheet' href='style.css'>
</head>
<body>
    <div id='app-container'>
        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <div id='top-toolbar'>
            <div class='header-left'>
                <img id='logo' src='icon.png' alt='Logo'>
                <h1>æ™ºèƒ½ä¾¿ç­¾</h1>
            </div>
            <div class='header-right'>
                <button id='add-folder-btn' class='toolbar-button'>ğŸ“ æ–°å»ºæ–‡ä»¶å¤¹</button>
                <button id='add-note-btn' class='toolbar-button'>ğŸ“ æ–°å»ºä¾¿ç­¾</button>
                <button id='sync-github-btn' class='toolbar-button'>ğŸ”„ åŒæ­¥åˆ° GitHub</button>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <main>
            <section class='active'>
                <div id='notes-container'>
                    <!-- ä¾¿ç­¾æ ‘å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                </div>
            </section>
        </main>

        <!-- åº•éƒ¨å·¥å…·æ  -->
        <div id='bottom-toolbar'>
            <div class='footer-tabs'>
                <button class='tab-button active'>ğŸ“‹ æ‰€æœ‰ä¾¿ç­¾</button>
                <button class='tab-button'>â­ æ”¶è—</button>
            </div>
        </div>

        <!-- ç¼–è¾‘æ¨¡æ€æ¡† -->
        <div id='edit-modal' class='modal hidden'>
            <div class='modal-content'>
                <h2>ç¼–è¾‘ä¾¿ç­¾</h2>
                <input type='text' id='edit-title' placeholder='æ ‡é¢˜'>
                <textarea id='edit-content' placeholder='å†…å®¹...'></textarea>
                <div class='modal-actions'>
                    <button id='save-edit-btn'>ä¿å­˜</button>
                    <button id='cancel-edit-btn'>å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script src='notesPlugin.js'></script>
</body>
</html>
```

## 2\. CSS æ ·å¼ (style.css)

```markdown
/* åŸºç¡€æ ·å¼ */
body {
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
    background-color: #f5f5f5;
    color: #333;
    margin: 0;
    padding: 0;
}

#app-container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* å·¥å…·æ æ ·å¼ */
#top-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 30px;
    background-color: #333;
    color: white;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.header-left, .header-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

#logo {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.toolbar-button {
    border: none;
    color: #ddd;
    background: none;
    padding: 8px 12px;
    font-size: 14px;
    cursor: pointer;
    border-radius: 4px;
}

.toolbar-button:hover {
    background-color: #444;
}

#bottom-toolbar {
    padding: 8px 0;
    background-color: #333;
    margin-top: auto;
}

.footer-tabs {
    display: flex;
    justify-content: center;
}

.tab-button {
    border: none;
    color: #ddd;
    background: none;
    padding: 8px 16px;
    cursor: pointer;
}

.tab-button.active {
    color: white;
    font-weight: bold;
}

/* ä¾¿ç­¾æ ‘æ ·å¼ */
#notes-container {
    padding: 20px;
    background-color: white;
    border-radius: 8px;
    margin: 20px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.note-item {
    margin-bottom: 10px;
}

.folder-header {
    padding: 8px 12px;
    background-color: #f0f0f0;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
}

.folder-header:hover {
    background-color: #e0e0e0;
}

.folder-header .toggle-icon {
    transition: transform 0.2s;
}

.folder-header.open .toggle-icon {
    transform: rotate(90deg);
}

.folder-children {
    padding-left: 20px;
    display: none;
}

.folder-item.open > .folder-children {
    display: block;
}

.note-content {
    padding: 8px 12px;
    background-color: #f9f9f9;
    border-radius: 4px;
    margin-top: 4px;
    cursor: pointer;
}

.note-content:hover {
    background-color: #f0f0f0;
}

/* æ¨¡æ€æ¡†æ ·å¼ */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    width: 80%;
    max-width: 500px;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.modal-actions button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#save-edit-btn {
    background-color: #4CAF50;
    color: white;
}

#cancel-edit-btn {
    background-color: #f44336;
    color: white;
}

.hidden {
    display: none !important;
}
```

## 3\. JavaScript å®ç° (notesPlugin.js)

```markdown
class NotesPlugin {
    constructor() {
        this.notes = [];
        this.currentEditId = null;
        this.githubToken = null;
        this.githubRepo = null;
        this.githubFilePath = 'data/notes.json';

        this.initElements();
        this.loadNotes();
        this.renderNotes();
        this.setupEventListeners();
    }

    initElements() {
        this.notesContainer = document.getElementById('notes-container');
        this.addFolderBtn = document.getElementById('add-folder-btn');
        this.addNoteBtn = document.getElementById('add-note-btn');
        this.syncGithubBtn = document.getElementById('sync-github-btn');
        this.editModal = document.getElementById('edit-modal');
        this.editTitle = document.getElementById('edit-title');
        this.editContent = document.getElementById('edit-content');
        this.saveEditBtn = document.getElementById('save-edit-btn');
        this.cancelEditBtn = document.getElementById('cancel-edit-btn');
    }

    setupEventListeners() {
        this.addFolderBtn.addEventListener('click', () => this.addNewFolder());
        this.addNoteBtn.addEventListener('click', () => this.addNewNote());
        this.syncGithubBtn.addEventListener('click', () => this.syncWithGitHub());
        this.saveEditBtn.addEventListener('click', () => this.saveEdit());
        this.cancelEditBtn.addEventListener('click', () => this.closeEditModal());

        // é¦–æ¬¡ä½¿ç”¨æ—¶è®¾ç½® GitHub ä¿¡æ¯
        if (!localStorage.getItem('githubConfigured')) {
            this.promptGitHubConfig();
        }
    }

    promptGitHubConfig() {
        const token = prompt('è¯·è¾“å…¥ GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œ (Personal Access Token):');
        const repo = prompt('è¯·è¾“å…¥ GitHub ä»“åº“ (æ ¼å¼: username/repo):');

        if (token && repo) {
            this.githubToken = token;
            this.githubRepo = repo;
            localStorage.setItem('githubToken', token);
            localStorage.setItem('githubRepo', repo);
            localStorage.setItem('githubConfigured', 'true');
            alert('GitHub é…ç½®å·²ä¿å­˜ï¼');
        }
    }

    // æ•°æ®å­˜å‚¨æ–¹æ³•
    loadNotes() {
        // ä» localStorage åŠ è½½
        const localNotes = localStorage.getItem('notes');
        if (localNotes) {
            this.notes = JSON.parse(localNotes);
            return;
        }

        // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
        this.notes = [
            {
                id: '1',
                title: 'å·¥ä½œ',
                type: 'folder',
                children: [
                    {
                        id: '1-1',
                        title: 'é¡¹ç›®A',
                        type: 'note',
                        content: 'é¡¹ç›®Açš„ä»»åŠ¡åˆ—è¡¨...'
                    }
                ],
                isOpen: true
            },
            {
                id: '2',
                title: 'ä¸ªäºº',
                type: 'folder',
                children: [],
                isOpen: false
            }
        ];

        this.saveNotesToLocal();
    }

    saveNotesToLocal() {
        localStorage.setItem('notes', JSON.stringify(this.notes));
    }

    // GitHub åŒæ­¥æ–¹æ³•
    async syncWithGitHub() {
        if (!this.githubToken || !this.githubRepo) {
            this.promptGitHubConfig();
            return;
        }

        try {
            // 1. å°è¯•è·å–ç°æœ‰æ–‡ä»¶ SHA
            const sha = await this.getGitHubFileSHA();

            // 2. ä¸Šä¼ æ–°å†…å®¹
            await this.uploadToGitHub(sha);

            alert('åŒæ­¥åˆ° GitHub æˆåŠŸï¼');
        } catch (error) {
            console.error('åŒæ­¥å¤±è´¥:', error);
            alert(`åŒæ­¥å¤±è´¥: ${error.message}`);
        }
    }

    async getGitHubFileSHA() {
        const url = `https://api.github.com/repos/${this.githubRepo}/contents/${this.githubFilePath}`;
        const response = await fetch(url, {
            headers: {
                'Authorization': `token ${this.githubToken}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        if (response.status === 404) {
            return null; // æ–‡ä»¶ä¸å­˜åœ¨
        }

        if (!response.ok) {
            throw new Error(`è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥: ${response.status}`);
        }

        const data = await response.json();
        return data.sha;
    }

    async uploadToGitHub(sha) {
        const url = `https://api.github.com/repos/${this.githubRepo}/contents/${this.githubFilePath}`;
        const content = btoa(unescape(encodeURIComponent(JSON.stringify(this.notes, null, 2)));

        const response = await fetch(url, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${this.githubToken}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Update notes via web app',
                content: content,
                sha: sha || undefined
            })
        });

        if (!response.ok) {
            throw new Error(`ä¸Šä¼ å¤±è´¥: ${response.status}`);
        }
    }

    // ä¾¿ç­¾æ“ä½œæ–¹æ³•
    addNewFolder(parentId = null) {
        const newFolder = {
            id: this.generateId(parentId),
            title: 'æ–°å»ºæ–‡ä»¶å¤¹',
            type: 'folder',
            children: [],
            isOpen: true
        };

        if (parentId) {
            const parent = this.findNoteById(parentId);
            if (parent && parent.type === 'folder') {
                parent.children.push(newFolder);
            }
        } else {
            this.notes.push(newFolder);
        }

        this.saveAndRender();
        this.editNote(newFolder.id);
    }

    addNewNote(parentId = null) {
        const newNote = {
            id: this.generateId(parentId),
            title: 'æ–°å»ºä¾¿ç­¾',
            type: 'note',
            content: ''
        };

        if (parentId) {
            const parent = this.findNoteById(parentId);
            if (parent && parent.type === 'folder') {
                parent.children.push(newNote);
            }
        } else {
            this.notes.push(newNote);
        }

        this.saveAndRender();
        this.editNote(newNote.id);
    }

    generateId(parentId = null) {
        const timestamp = Date.now().toString(36);
        const random = Math.random().toString(36).substring(2, 6);
        return parentId ? `${parentId}-${timestamp}${random}` : `${timestamp}${random}`;
    }

    findNoteById(id, notes = this.notes) {
        for (const note of notes) {
            if (note.id === id) return note;
            if (note.type === 'folder' && note.children) {
                const found = this.findNoteById(id, note.children);
                if (found) return found;
            }
        }
        return null;
    }

    // æ¸²æŸ“æ–¹æ³•
    renderNotes() {
        this.notesContainer.innerHTML = '';
        this.notes.forEach(note => this.renderNoteItem(note));
    }

    renderNoteItem(note, depth = 0) {
        const item = document.createElement('div');
        item.className = `note-item ${note.type}-item`;
        item.dataset.id = note.id;

        if (note.type === 'folder') {
            item.innerHTML = `
                <div class='folder-header ${note.isOpen ? 'open' : ''}' onclick='notesPlugin.toggleFolder('${note.id}')'>
                    <span class='toggle-icon'>â–¶</span>
                    <span class='folder-title'>ğŸ“ ${note.title}</span>
                    <button class='add-note-btn' onclick='notesPlugin.addNewNote('${note.id}'); event.stopPropagation()'>+</button>
                    <button class='edit-btn' onclick='notesPlugin.editNote('${note.id}'); event.stopPropagation()'>âœï¸</button>
                    <button class='delete-btn' onclick='notesPlugin.deleteNote('${note.id}'); event.stopPropagation()'>ğŸ—‘ï¸</button>
                </div>
                <div class='folder-children' style='display: ${note.isOpen ? 'block' : 'none'}'>
                    ${note.children.map(child => this.renderNoteItem(child, depth + 1).outerHTML).join('')}
                </div>
            `;
        } else {
            item.innerHTML = `
                <div class='note-content' onclick='notesPlugin.editNote('${note.id}')'>
                    <strong>ğŸ“ ${note.title}</strong>
                    <p>${note.content.substring(0, 50)}${note.content.length > 50 ? '...' : ''}</p>
                </div>
            `;
        }

        return item;
    }

    // äº¤äº’æ–¹æ³•
    toggleFolder(id) {
        const note = this.findNoteById(id);
        if (note && note.type === 'folder') {
            note.isOpen = !note.isOpen;
            this.saveAndRender();
        }
    }

    editNote(id) {
        const note = this.findNoteById(id);
        if (!note) return;

        this.currentEditId = id;
        this.editTitle.value = note.title;
        this.editContent.value = note.type === 'note' ? note.content : '';
        this.editModal.classList.remove('hidden');
    }

    saveEdit() {
        const note = this.findNoteById(this.currentEditId);
        if (!note) return;

        note.title = this.editTitle.value;
        if (note.type === 'note') {
            note.content = this.editContent.value;
        }

        this.closeEditModal();
        this.saveAndRender();
    }

    closeEditModal() {
        this.editModal.classList.add('hidden');
        this.currentEditId = null;
    }

    deleteNote(id) {
        if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿ')) return;

        // ä»æ ¹æ•°ç»„æˆ–çˆ¶æ–‡ä»¶å¤¹ä¸­åˆ é™¤
        const deleteFromArray = (array) => {
            const index = array.findIndex(n => n.id === id);
            if (index !== -1) {
                array.splice(index, 1);
                return true;
            }

            for (const item of array) {
                if (item.type === 'folder' && item.children) {
                    if (deleteFromArray(item.children)) {
                        return true;
                    }
                }
            }

            return false;
        };

        if (deleteFromArray(this.notes)) {
            this.saveAndRender();
        }
    }

    saveAndRender() {
        this.saveNotesToLocal();
        this.renderNotes();
    }
}

// åˆå§‹åŒ–æ’ä»¶
const notesPlugin = new NotesPlugin();
window.notesPlugin = notesPlugin; // æš´éœ²ç»™å…¨å±€ä»¥ä¾¿HTMLè°ƒç”¨
```

## åŠŸèƒ½è¯´æ˜

1.  **æœ¬åœ°å­˜å‚¨**ï¼š

    - ä½¿ç”¨ `localStorage` ä¿å­˜ä¾¿ç­¾æ•°æ®
    - æ”¯æŒæ–‡ä»¶å¤¹å’Œä¾¿ç­¾ä¸¤ç§ç±»å‹
    - è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ›´æ”¹

2.  **GitHub åŒæ­¥**ï¼š

    - ä½¿ç”¨ GitHub API åŒæ­¥æ•°æ®
    - éœ€è¦é…ç½® GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œå’Œä»“åº“
    - è‡ªåŠ¨å¤„ç†æ–‡ä»¶åˆ›å»ºå’Œæ›´æ–°

3.  **å±‚çº§ç»“æ„**ï¼š

    - æ”¯æŒæ— é™å±‚çº§åµŒå¥—
    - æ–‡ä»¶å¤¹å¯ä»¥åŒ…å«å…¶ä»–æ–‡ä»¶å¤¹æˆ–ä¾¿ç­¾
    - æ¯ä¸ªé¡¹ç›®æœ‰å”¯ä¸€ ID

4.  **æŠ˜å åŠŸèƒ½**ï¼š

    - ç‚¹å‡»æ–‡ä»¶å¤¹æ ‡é¢˜åˆ‡æ¢å±•å¼€/æŠ˜å çŠ¶æ€
    - ä¿å­˜æŠ˜å çŠ¶æ€
    - æ”¯æŒåœ¨æ–‡ä»¶å¤¹å†…æ–°å»ºé¡¹ç›®

5.  **ç¼–è¾‘åŠŸèƒ½**ï¼š

    - åŒå‡»é¡¹ç›®æˆ–ç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
    - å®æ—¶ä¿å­˜æ›´æ”¹

6.  **UI äº¤äº’**ï¼š

    - å“åº”å¼è®¾è®¡
    - æ¸…æ™°çš„è§†è§‰å±‚æ¬¡
    - æ“ä½œæŒ‰é’®ç›´è§‚

## ä½¿ç”¨è¯´æ˜

1.  é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦é…ç½® GitHub ä¿¡æ¯ï¼ˆä»¤ç‰Œå’Œä»“åº“ï¼‰
2.  ç‚¹å‡»'æ–°å»ºæ–‡ä»¶å¤¹'æˆ–'æ–°å»ºä¾¿ç­¾'æ·»åŠ é¡¹ç›®
3.  ç‚¹å‡»æ–‡ä»¶å¤¹æ ‡é¢˜å±•å¼€/æŠ˜å 
4.  ç‚¹å‡»ä¾¿ç­¾å†…å®¹è¿›è¡Œç¼–è¾‘
5.  ä½¿ç”¨'åŒæ­¥åˆ° GitHub'æŒ‰é’®æ‰‹åŠ¨åŒæ­¥æ•°æ®

è¿™ä¸ªå®ç°æä¾›äº†å®Œæ•´çš„ä¾¿ç­¾ç®¡ç†åŠŸèƒ½ï¼Œé€‚åˆä¸ªäººä½¿ç”¨æˆ–å°å‹å›¢é˜Ÿåä½œã€‚

è¿™æ˜¯ç‹¬ç«‹é¡¹ç›®è¿˜æ˜¯å¯ä»¥èå…¥åŸæ¥ä¹¦ç­¾é¡¹ç›®çš„æ’ä»¶ï¼Ÿå…·ä½“å¦‚ä½•ä½¿ç”¨ï¼Ÿ

è¿™ä¸ªå®ç°æ—¢å¯ä»¥ä½œä¸ºç‹¬ç«‹é¡¹ç›®è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ’ä»¶é›†æˆåˆ°åŸæœ‰çš„ä¹¦ç­¾ç®¡ç†é¡¹ç›®ä¸­ã€‚ä»¥ä¸‹æ˜¯å…·ä½“çš„ä½¿ç”¨æ–¹å¼å’Œé›†æˆæ–¹æ³•ï¼š

---

## **1\. ä½œä¸ºç‹¬ç«‹é¡¹ç›®ä½¿ç”¨**

### **ä½¿ç”¨æ­¥éª¤**

1.  **åˆ›å»ºé¡¹ç›®æ–‡ä»¶**ï¼š

    - `index.html` (ä¸»é¡µé¢)
    - `style.css` (æ ·å¼)
    - `notesPlugin.js` (æ ¸å¿ƒé€»è¾‘)
    - `icon.png` (å¯é€‰ï¼Œå·¥å…·æ å›¾æ ‡)

2.  **ç›´æ¥è¿è¡Œ**ï¼š

    - æ‰“å¼€ `index.html` å³å¯åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨
    - æ•°æ®ä¼šä¿å­˜åœ¨æµè§ˆå™¨çš„ `localStorage` ä¸­

3.  **é…ç½® GitHub åŒæ­¥**ï¼š

    - é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè¾“å…¥ GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œå’Œä»“åº“ä¿¡æ¯
    - ä¹‹åç‚¹å‡» 'åŒæ­¥åˆ° GitHub' æŒ‰é’®æ‰‹åŠ¨åŒæ­¥

---

## **2\. ä½œä¸ºæ’ä»¶é›†æˆåˆ°åŸæœ‰ä¹¦ç­¾é¡¹ç›®**

### **é›†æˆæ­¥éª¤**

#### **(1) æ–‡ä»¶åˆå¹¶**

1.  **CSS æ•´åˆ**ï¼š

    - å°† `style.css` ä¸­çš„æ ·å¼åˆå¹¶åˆ°åŸé¡¹ç›®çš„ CSS æ–‡ä»¶ä¸­
    - æ³¨æ„é¿å…ç±»åå†²çªï¼ˆå¯ä»¥æ·»åŠ å‰ç¼€å¦‚ `.notes-`ï¼‰

2.  **HTML ç»“æ„**ï¼š

    - åœ¨åŸé¡¹ç›®çš„ HTML ä¸­æ·»åŠ ä¾¿ç­¾çš„å®¹å™¨ï¼š

    ```markdown
    <section id='notes-section'>
      <div id='notes-container'></div>
      <!-- åŸæœ‰ä¹¦ç­¾å†…å®¹ -->
    </section>
    ```

3.  **JavaScript é›†æˆ**ï¼š

    - å°† `notesPlugin.js` åˆå¹¶åˆ°åŸé¡¹ç›®çš„ JS ä¸­
    - æˆ–è€…ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼š

    ```markdown
    import NotesPlugin from './notesPlugin.js';
    const notesPlugin = new NotesPlugin();
    ```

#### **(2) åŠŸèƒ½æ•´åˆ**

1.  **å…±äº«æ•°æ®å­˜å‚¨**ï¼š

    - å¦‚æœåŸé¡¹ç›®å·²ä½¿ç”¨ `localStorage`ï¼Œå¯ä»¥åˆå¹¶å­˜å‚¨ç»“æ„ï¼š

    ```markdown
    // ç¤ºä¾‹åˆå¹¶åçš„æ•°æ®ç»“æ„
    const appData = {
      bookmarks: [...], // åŸæœ‰ä¹¦ç­¾æ•°æ®
      notes: [...]     // æ–°ä¾¿ç­¾æ•°æ®
    };
    ```

2.  **UI æ•´åˆ**ï¼š

    - åœ¨åŸæœ‰å·¥å…·æ æ·»åŠ ä¾¿ç­¾ç›¸å…³æŒ‰é’®ï¼š

    ```markdown
    <button id='show-notes-btn'>ğŸ“ ä¾¿ç­¾</button>
    ```

    - é€šè¿‡äº‹ä»¶åˆ‡æ¢æ˜¾ç¤ºï¼š

    ```markdown
    document.getElementById('show-notes-btn').addEventListener('click', () => {
      document.getElementById('bookmarks-section').classList.add('hidden');
      document.getElementById('notes-section').classList.remove('hidden');
    });
    ```

#### **(3) åŒæ­¥é€»è¾‘å¤ç”¨**

- å¦‚æœåŸé¡¹ç›®å·²æœ‰ GitHub åŒæ­¥åŠŸèƒ½ï¼Œå¯ä»¥å¤ç”¨ API è°ƒç”¨é€»è¾‘ï¼š

```markdown
// å…±äº«åŒæ­¥æ–¹æ³•
async function syncAllToGitHub() {
  await syncBookmarks(); // åŸæœ‰ä¹¦ç­¾åŒæ­¥
  await notesPlugin.syncWithGitHub(); // ä¾¿ç­¾åŒæ­¥
}
```

---

## **3\. å…³é”®é›†æˆç‚¹**

### **(1) æ•°æ®éš”ç¦»**

- **ç‹¬ç«‹å­˜å‚¨**ï¼ˆæ¨èåˆå­¦è€…ï¼‰ï¼š

  ```markdown
  // ä¾¿ç­¾æ•°æ®ç‹¬ç«‹å­˜å‚¨
  localStorage.setItem('notes', JSON.stringify(notes));
  // ä¹¦ç­¾æ•°æ®ç‹¬ç«‹å­˜å‚¨
  localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
  ```

- **ç»Ÿä¸€å­˜å‚¨**ï¼ˆè¿›é˜¶ï¼‰ï¼š

  ```markdown
  const allData = {
    version: 1,
    bookmarks: [...],
    notes: [...]
  };
  localStorage.setItem('appData', JSON.stringify(allData));
  ```

### **(2) æ ·å¼å†²çªå¤„ç†**

åœ¨åŸæœ‰ CSS ä¸­æ·»åŠ å‘½åç©ºé—´ï¼š

```markdown
/* ä¾¿ç­¾ä¸“å±æ ·å¼ */
.notes-container { /*...*/ }
.notes-folder-header { /*...*/ }

/* ä¹¦ç­¾ä¸“å±æ ·å¼ */
.bookmarks-container { /*...*/ }
```

### **(3) äº¤äº’é€»è¾‘**

- **åˆ‡æ¢æ ‡ç­¾é¡µ**ï¼š

  ```markdown
  function showTab(tabName) {
    // éšè—æ‰€æœ‰
    document.querySelectorAll('main > section').forEach(s => {
      s.classList.remove('active');
    });
    // æ˜¾ç¤ºç›®æ ‡
    document.getElementById(`${tabName}-section`).classList.add('active');
  }
  ```

- **å…±äº« GitHub é…ç½®**ï¼š

  ```markdown
  // ä»åŸé¡¹ç›®è¯»å–é…ç½®
  notesPlugin.githubToken = bookmarkApp.githubToken;
  notesPlugin.githubRepo = bookmarkApp.githubRepo;
  ```

---

## **4\. ä½¿ç”¨åœºæ™¯ç¤ºä¾‹**

### **åœºæ™¯1ï¼šå¿«é€Ÿç‹¬ç«‹ä½¿ç”¨**

1.  ä¸‹è½½ä¸‰ä¸ªæ–‡ä»¶ï¼ˆHTML/CSS/JSï¼‰
2.  ç›´æ¥æ‰“å¼€ `index.html`
3.  å¼€å§‹è®°å½•ä¾¿ç­¾ï¼Œæ•°æ®ä¿å­˜åœ¨æœ¬åœ°

### **åœºæ™¯2ï¼šé›†æˆåˆ°ä¹¦ç­¾é¡¹ç›®**

1.  å°†ä¾¿ç­¾ä»£ç åˆå¹¶åˆ°åŸé¡¹ç›®
2.  æ·»åŠ åˆ‡æ¢æŒ‰é’®ï¼š

    ```markdown
    <div class='tab-buttons'>
      <button onclick='showTab('bookmarks')'>ä¹¦ç­¾</button>
      <button onclick='showTab('notes')'>ä¾¿ç­¾</button>
    </div>
    ```

3.  å®ç°æ•°æ®åŒæ­¥è”åŠ¨

---

## **5\. æ³¨æ„äº‹é¡¹**

1.  **GitHub API é™åˆ¶**ï¼š

    - ä¸ªäººè®¿é—®ä»¤ç‰Œéœ€è¦ `repo` æƒé™
    - æ¯å°æ—¶æœ€å¤š 60 æ¬¡ API è°ƒç”¨ï¼ˆæœªè®¤è¯ï¼‰

2.  **ç§»åŠ¨ç«¯é€‚é…**ï¼š

    - ç¡®ä¿æŠ˜å æŒ‰é’®å¤§å°é€‚åˆè§¦æ‘¸æ“ä½œ
    - æ·»åŠ å“åº”å¼å¸ƒå±€ï¼š

    ```markdown
    @media (max-width: 600px) {
      .folder-header { padding: 12px; }
    }
    ```

3.  **æ•°æ®å¤‡ä»½**ï¼š

    - å³ä½¿ä½¿ç”¨ GitHub åŒæ­¥ï¼Œä¹Ÿå»ºè®®å®šæœŸå¯¼å‡ºæœ¬åœ°å¤‡ä»½

4.  **å†²çªå¤„ç†**ï¼š

    - å¦‚æœå¤šè®¾å¤‡åŒæ—¶ç¼–è¾‘ï¼Œå»ºè®®å®ç°ç®€å•çš„ 'æœ€åä¿®æ”¹ä¼˜å…ˆ' ç­–ç•¥

---

é€šè¿‡ä»¥ä¸Šæ–¹å¼ï¼Œä½ å¯ä»¥çµæ´»é€‰æ‹©ç‹¬ç«‹ä½¿ç”¨ä¾¿ç­¾åŠŸèƒ½ï¼Œæˆ–å°†å…¶æ— ç¼é›†æˆåˆ°åŸæœ‰ä¹¦ç­¾ç®¡ç†ç³»ç»Ÿä¸­ã€‚ä¸¤ç§æ–¹å¼å‡ä¿ç•™äº†å®Œæ•´çš„å±‚çº§ç»“æ„å’Œ GitHub åŒæ­¥èƒ½åŠ›ã€‚
$$$$$$$">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mgt.xx.kg/post/deepseek-bian-qian-xiang-mu.html">
<meta property="og:image" content="avatar.svg">
<title>deepseekä¾¿ç­¾é¡¹ç›®</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
html { background: #d2d4d6; }
body{box-sizing: border-box;min-width: 200px;max-width: 960px;margin: 30px auto; padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25; border-radius: 10px; background: rgba(10, 100, 130, 0.08); box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);  overflow: auto;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top: 30px; text-align: center; font-size: small;}
</style>

<style>
.postTitle{margin: auto 0;font-size:1.6em;font-weight:bold;color: #1f85c9;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
.markdown-body h1{font-size: 1.4em;}
.markdown-body h2{font-size: 1.2em;}
.markdown-body h3{font-size: 1em;}
#footer {margin-top: 30px; text-align: center; font-size: small;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 580px) {
     body {margin:0;padding: 12px;box-shadow: none;}
    .postTitle{font-size:1.4em; color: #1f85c9;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">deepseekä¾¿ç­¾é¡¹ç›®</h1>
<div class="title-right">
    <a href="https://mgt.xx.kg" id="buttonHome" class="btn btn-invisible circle" title="é¦–é¡µ">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/fjvi/note/issues/37" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="åˆ‡æ¢ä¸»é¢˜">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><p>è¦å®ç° <strong>æœ¬åœ°å­˜å‚¨ä¾¿ç­¾ + GitHub åŒæ­¥</strong> ä»¥åŠ <strong>å±‚çº§åŒ–æŠ˜å çš„ä¾¿ç­¾ç»“æ„</strong>ï¼Œå¯ä»¥ç»“åˆ <strong>æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorage/IndexedDBï¼‰</strong> å’Œ <strong>GitHub API</strong>ï¼Œå¹¶ä½¿ç”¨ç±»ä¼¼ä¹¦ç­¾çš„ <strong>æ ‘å½¢ç»“æ„ + æŠ˜å é€»è¾‘</strong>ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´æ–¹æ¡ˆï¼š</p>
<hr>
<h2><strong>1. ä¾¿ç­¾æœ¬åœ°å­˜å‚¨ + GitHub åŒæ­¥</strong></h2>
<h3><strong>(1) æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorage/IndexedDBï¼‰</strong></h3>
<p>ä½¿ç”¨ <code class="notranslate">localStorage</code> å­˜å‚¨ä¾¿ç­¾æ•°æ®ï¼ˆé€‚åˆå°å‹æ•°æ®ï¼‰ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">// ä¿å­˜ä¾¿ç­¾åˆ° localStorage
function saveNotesToLocal(notes) {
  localStorage.setItem('notes', JSON.stringify(notes));
}

// ä» localStorage åŠ è½½ä¾¿ç­¾
function loadNotesFromLocal() {
  const notes = localStorage.getItem('notes');
  return notes ? JSON.parse(notes) : <span class="pl-s">[</span><span class="pl-s">]</span>;
}</pre></div>
<p><strong>ï¼ˆå¦‚æœæ•°æ®é‡å¤§ï¼Œæ”¹ç”¨ <code class="notranslate">IndexedDB</code> å­˜å‚¨ï¼‰</strong></p>
<hr>
<h3><strong>(2) GitHub åŒæ­¥</strong></h3>
<p>ä½¿ç”¨ <strong>GitHub API</strong> æˆ– <strong>GitHub Pages + æ‰‹åŠ¨åŒæ­¥</strong>ï¼š</p>
<h4><strong>æ–¹æ¡ˆ Aï¼šGitHub APIï¼ˆè‡ªåŠ¨åŒæ­¥ï¼‰</strong></h4>
<div class="highlight highlight-text-md"><pre class="notranslate">async function syncToGitHub(notes, repoPath = "data/notes.json") {
  const token = "YOUR_GITHUB_TOKEN"; // ä¸ªäººè®¿é—®ä»¤ç‰Œ
  const repo = "your-username/your-repo";
  const url = <span class="pl-s">`</span><span class="pl-c1">https://api.github.com/repos/${repo}/contents/${repoPath}</span><span class="pl-s">`</span>;

  // è·å–æ–‡ä»¶ SHAï¼ˆå¦‚æœå·²å­˜åœ¨ï¼‰
  const { sha } = await fetch(url, {
    headers: { Authorization: <span class="pl-s">`</span><span class="pl-c1">token ${token}</span><span class="pl-s">`</span> },
  }).then(res =&gt; res.json());

  // æ›´æ–°æ–‡ä»¶
  await fetch(url, {
    method: "PUT",
    headers: { Authorization: <span class="pl-s">`</span><span class="pl-c1">token ${token}</span><span class="pl-s">`</span> },
    body: JSON.stringify({
      message: "Update notes",
      content: btoa(JSON.stringify(notes)), // Base64 ç¼–ç 
      sha, // ç”¨äºè¦†ç›–ç°æœ‰æ–‡ä»¶
    }),
  });
}</pre></div>
<h4><strong>æ–¹æ¡ˆ Bï¼šGitHub Pages + æ‰‹åŠ¨ä¸‹è½½/ä¸Šä¼ </strong></h4>
<ol>
<li>åœ¨ GitHub ä»“åº“å­˜å‚¨ <code class="notranslate">notes.json</code></li>
<li>ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡» <strong>"å¯¼å‡ºåˆ° GitHub"</strong> ä¸Šä¼ </li>
<li>æ‰‹åŠ¨ç‚¹å‡» <strong>"ä» GitHub å¯¼å…¥"</strong> ä¸‹è½½</li>
</ol>
<hr>
<h2><strong>2. å±‚çº§åŒ–ä¾¿ç­¾ç»“æ„ï¼ˆç±»ä¼¼ä¹¦ç­¾ï¼‰</strong></h2>
<h3><strong>(1) æ•°æ®ç»“æ„</strong></h3>
<div class="highlight highlight-text-md"><pre class="notranslate">const notes = <span class="pl-s">[</span>
  {
    id: "1",
    title: "å·¥ä½œ",
    type: "folder",
    children: <span class="pl-s">[</span>
      {
        id: "1-1",
        title: "é¡¹ç›®A",
        type: "note",
        content: "å¾…åŠäº‹é¡¹...",
      },
      {
        id: "1-2",
        title: "ä¼šè®®è®°å½•",
        type: "folder",
        children: <span class="pl-s">[</span>...<span class="pl-s">]</span>,
      },
    <span class="pl-s">]</span>,
    isOpen: true, // æ§åˆ¶æŠ˜å 
  },
  {
    id: "2",
    title: "ä¸ªäºº",
    type: "folder",
    isOpen: false,
    children: <span class="pl-s">[</span>...<span class="pl-s">]</span>,
  },
<span class="pl-s">]</span>;</pre></div>
<h3><strong>(2) æŠ˜å é€»è¾‘ï¼ˆç±»ä¼¼ä¹¦ç­¾ï¼‰</strong></h3>
<p><strong>HTML ç»“æ„</strong>ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">&lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s">"</span><span class="pl-s">note-tree</span><span class="pl-s">"</span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s">"</span><span class="pl-s">note-folder</span><span class="pl-s">"</span> <span class="pl-e">data-id</span>=<span class="pl-s">"</span><span class="pl-s">1</span><span class="pl-s">"</span>&gt;
    <span class="pl-c1">&lt;div class="folder-header" onclick="toggleFolder('1')"&gt;</span>
    <span class="pl-c1">  &lt;span&gt;ğŸ“ å·¥ä½œ&lt;/span&gt;</span>
    <span class="pl-c1">  &lt;span class="toggle-icon"&gt;â–¶&lt;/span&gt;</span>
    <span class="pl-c1">&lt;/div&gt;</span>
    <span class="pl-c1">&lt;div class="folder-children"&gt;</span>
    <span class="pl-c1">  &lt;!-- å­ä¾¿ç­¾æˆ–æ–‡ä»¶å¤¹ --&gt;</span>
    <span class="pl-c1">&lt;/div&gt;</span>
  &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>
<p><strong>CSS æŠ˜å åŠ¨ç”»</strong>ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">.note-folder .folder-children {
  display: none;
  padding-left: 20px;
}

.note-folder.open .folder-children {
  display: block;
}

.note-folder.open .toggle-icon {
  transform: rotate(90deg);
}</pre></div>
<p><strong>JavaScript æŠ˜å æ§åˆ¶</strong>ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">function toggleFolder(id) {
  const folder = document.querySelector(<span class="pl-s">`</span><span class="pl-c1">.note-folder[data-id="${id}"]</span><span class="pl-s">`</span>);
  folder.classList.toggle("open");

  // æ›´æ–°æ•°æ®ä¸­çš„ isOpen çŠ¶æ€
  updateNoteInData(id, { isOpen: folder.classList.contains("open") });
}</pre></div>
<h3><strong>(3) æŠ˜å æ’æ–¥é€»è¾‘ï¼ˆå…„å¼Ÿçº§/å­å­™çº§ï¼‰</strong></h3>
<div class="highlight highlight-text-md"><pre class="notranslate">function closeSiblingsAndChildren(folderId) {
  // å…³é—­æ‰€æœ‰å…„å¼Ÿæ–‡ä»¶å¤¹
  const parentFolder = document.querySelector(<span class="pl-s">`</span><span class="pl-c1">.note-folder[data-id="${folderId}"]</span><span class="pl-s">`</span>).parentElement.closest('.note-folder');
  if (parentFolder) {
    parentFolder.querySelectorAll('.note-folder').forEach(f =&gt; {
      if (f.dataset.id !== folderId) {
        f.classList.remove("open");
      }
    });
  }

  // å…³é—­æ‰€æœ‰å­æ–‡ä»¶å¤¹
  document.querySelectorAll(<span class="pl-s">`</span><span class="pl-c1">.note-folder[data-id^="${folderId}-"]</span><span class="pl-s">`</span>).forEach(f =&gt; {
    f.classList.remove("open");
  });
}</pre></div>
<hr>
<h2><strong>3. å®Œæ•´æµç¨‹</strong></h2>
<ol>
<li>
<p><strong>ç”¨æˆ·æ“ä½œ</strong>ï¼š</p>
<ul>
<li>æ–°å¢/ç¼–è¾‘ä¾¿ç­¾ â†’ ä¿å­˜åˆ° <code class="notranslate">localStorage</code></li>
<li>ç‚¹å‡» <strong>"åŒæ­¥åˆ° GitHub"</strong> â†’ è°ƒç”¨ <code class="notranslate">syncToGitHub()</code></li>
<li>ç‚¹å‡»æ–‡ä»¶å¤¹ â†’ æŠ˜å /å±•å¼€ï¼Œå¹¶æ’æ–¥å…„å¼Ÿçº§å’Œå­çº§</li>
</ul>
</li>
<li>
<p><strong>åˆå§‹åŒ–åŠ è½½</strong>ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">// ä» localStorage æˆ– GitHub åŠ è½½æ•°æ®
let notes = loadNotesFromLocal();
renderNoteTree(notes);</pre></div>
</li>
<li>
<p><strong>GitHub åŒæ­¥</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·æ‰‹åŠ¨è§¦å‘åŒæ­¥</li>
<li>æˆ–è®¾ç½®å®šæ—¶è‡ªåŠ¨åŒæ­¥ï¼ˆéœ€è€ƒè™‘å†²çªå¤„ç†ï¼‰</li>
</ul>
</li>
</ol>
<hr>
<h2><strong>4. é¢å¤–ä¼˜åŒ–</strong></h2>
<ul>
<li><strong>å†²çªå¤„ç†</strong>ï¼šå¦‚æœæœ¬åœ°å’Œè¿œç¨‹æ•°æ®ä¸åŒï¼Œæç¤ºç”¨æˆ·é€‰æ‹©ç‰ˆæœ¬</li>
<li><strong>ç¦»çº¿æ¨¡å¼</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code class="notranslate">localStorage</code>ï¼Œè”ç½‘æ—¶å†åŒæ­¥</li>
<li><strong>IndexedDB</strong>ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œæ”¹ç”¨ IndexedDB å­˜å‚¨</li>
</ul>
<hr>
<h3><strong>æœ€ç»ˆæ•ˆæœ</strong></h3>
<p>âœ… <strong>æœ¬åœ°å­˜å‚¨</strong>ï¼ˆåˆ·æ–°ä¸ä¸¢å¤±ï¼‰<br>
âœ… <strong>GitHub åŒæ­¥</strong>ï¼ˆè·¨è®¾å¤‡è®¿é—®ï¼‰<br>
âœ… <strong>å±‚çº§åŒ–ä¾¿ç­¾</strong>ï¼ˆæ–‡ä»¶å¤¹ + æŠ˜å ï¼‰<br>
âœ… <strong>æ™ºèƒ½æŠ˜å </strong>ï¼ˆæ’æ–¥å…„å¼Ÿ/å­çº§ï¼‰</p>
<p>ä½ å¯ä»¥åŸºäºè¿™ä¸ªæ–¹æ¡ˆå®ç°ä¸€ä¸ªå®Œæ•´çš„ <strong>ä¾¿ç­¾ç®¡ç†åº”ç”¨</strong>ï¼ ğŸš€</p>
<h1>å¯ä»¥ç”Ÿæˆä¿®æ”¹åçš„notesPluginå®Œæ•´ä»£ç å—ï¼Ÿ</h1>
<h2>å®Œæ•´ Notes Plugin ä»£ç ï¼ˆGitHub API åŒæ­¥ï¼‰</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¾¿ç­¾æ’ä»¶å®ç°ï¼ŒåŒ…å«æœ¬åœ°å­˜å‚¨ã€GitHub åŒæ­¥ã€å±‚çº§åŒ–ç»“æ„å’ŒæŠ˜å åŠŸèƒ½ã€‚</p>
<h2>1. HTML ç»“æ„ (index.html)</h2>
<div class="highlight highlight-text-md"><pre class="notranslate"><span class="pl-c"><span class="pl-c">&lt;!</span>DOCTYPE html<span class="pl-c">&gt;</span></span>
&lt;<span class="pl-ent">html</span> <span class="pl-e">lang</span>=<span class="pl-s">"</span><span class="pl-s">zh-CN</span><span class="pl-s">"</span>&gt;
&lt;<span class="pl-ent">head</span>&gt;
    <span class="pl-c1">&lt;meta charset="UTF-8"&gt;</span>
    <span class="pl-c1">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span>
    <span class="pl-c1">&lt;title&gt;æ™ºèƒ½ä¾¿ç­¾ç®¡ç†&lt;/title&gt;</span>
    <span class="pl-c1">&lt;link rel="stylesheet" href="style.css"&gt;</span>
&lt;/<span class="pl-ent">head</span>&gt;
&lt;<span class="pl-ent">body</span>&gt;
    <span class="pl-c1">&lt;div id="app-container"&gt;</span>
    <span class="pl-c1">    &lt;!-- é¡¶éƒ¨å·¥å…·æ  --&gt;</span>
    <span class="pl-c1">    &lt;div id="top-toolbar"&gt;</span>
    <span class="pl-c1">        &lt;div class="header-left"&gt;</span>
    <span class="pl-c1">            &lt;img id="logo" src="icon.png" alt="Logo"&gt;</span>
    <span class="pl-c1">            &lt;h1&gt;æ™ºèƒ½ä¾¿ç­¾&lt;/h1&gt;</span>
    <span class="pl-c1">        &lt;/div&gt;</span>
    <span class="pl-c1">        &lt;div class="header-right"&gt;</span>
    <span class="pl-c1">            &lt;button id="add-folder-btn" class="toolbar-button"&gt;ğŸ“ æ–°å»ºæ–‡ä»¶å¤¹&lt;/button&gt;</span>
    <span class="pl-c1">            &lt;button id="add-note-btn" class="toolbar-button"&gt;ğŸ“ æ–°å»ºä¾¿ç­¾&lt;/button&gt;</span>
    <span class="pl-c1">            &lt;button id="sync-github-btn" class="toolbar-button"&gt;ğŸ”„ åŒæ­¥åˆ° GitHub&lt;/button&gt;</span>
    <span class="pl-c1">        &lt;/div&gt;</span>
    <span class="pl-c1">    &lt;/div&gt;</span>

    <span class="pl-c1">    &lt;!-- ä¸»å†…å®¹åŒº --&gt;</span>
    <span class="pl-c1">    &lt;main&gt;</span>
    <span class="pl-c1">        &lt;section class="active"&gt;</span>
    <span class="pl-c1">            &lt;div id="notes-container"&gt;</span>
    <span class="pl-c1">                &lt;!-- ä¾¿ç­¾æ ‘å°†åœ¨è¿™é‡Œæ¸²æŸ“ --&gt;</span>
    <span class="pl-c1">            &lt;/div&gt;</span>
    <span class="pl-c1">        &lt;/section&gt;</span>
    <span class="pl-c1">    &lt;/main&gt;</span>

    <span class="pl-c1">    &lt;!-- åº•éƒ¨å·¥å…·æ  --&gt;</span>
    <span class="pl-c1">    &lt;div id="bottom-toolbar"&gt;</span>
    <span class="pl-c1">        &lt;div class="footer-tabs"&gt;</span>
    <span class="pl-c1">            &lt;button class="tab-button active"&gt;ğŸ“‹ æ‰€æœ‰ä¾¿ç­¾&lt;/button&gt;</span>
    <span class="pl-c1">            &lt;button class="tab-button"&gt;â­ æ”¶è—&lt;/button&gt;</span>
    <span class="pl-c1">        &lt;/div&gt;</span>
    <span class="pl-c1">    &lt;/div&gt;</span>

    <span class="pl-c1">    &lt;!-- ç¼–è¾‘æ¨¡æ€æ¡† --&gt;</span>
    <span class="pl-c1">    &lt;div id="edit-modal" class="modal hidden"&gt;</span>
    <span class="pl-c1">        &lt;div class="modal-content"&gt;</span>
    <span class="pl-c1">            &lt;h2&gt;ç¼–è¾‘ä¾¿ç­¾&lt;/h2&gt;</span>
    <span class="pl-c1">            &lt;input type="text" id="edit-title" placeholder="æ ‡é¢˜"&gt;</span>
    <span class="pl-c1">            &lt;textarea id="edit-content" placeholder="å†…å®¹..."&gt;&lt;/textarea&gt;</span>
    <span class="pl-c1">            &lt;div class="modal-actions"&gt;</span>
    <span class="pl-c1">                &lt;button id="save-edit-btn"&gt;ä¿å­˜&lt;/button&gt;</span>
    <span class="pl-c1">                &lt;button id="cancel-edit-btn"&gt;å–æ¶ˆ&lt;/button&gt;</span>
    <span class="pl-c1">            &lt;/div&gt;</span>
    <span class="pl-c1">        &lt;/div&gt;</span>
    <span class="pl-c1">    &lt;/div&gt;</span>
    <span class="pl-c1">&lt;/div&gt;</span>

    <span class="pl-c1">&lt;script src="notesPlugin.js"&gt;&lt;/script&gt;</span>
&lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>
<h2>2. CSS æ ·å¼ (style.css)</h2>
<div class="highlight highlight-text-md"><pre class="notranslate">/<span class="pl-s">*</span> åŸºç¡€æ ·å¼ <span class="pl-s">*</span>/
body {
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
    background-color: #f5f5f5;
    color: <span class="pl-s">#<span class="pl-corl">333</span></span>;
    margin: 0;
    padding: 0;
}

#app-container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/<span class="pl-s">*</span> å·¥å…·æ æ ·å¼ <span class="pl-s">*</span>/
#top-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 30px;
    background-color: <span class="pl-s">#<span class="pl-corl">333</span></span>;
    color: white;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.header-left, .header-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

#logo {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.toolbar-button {
    border: none;
    color: #ddd;
    background: none;
    padding: 8px 12px;
    font-size: 14px;
    cursor: pointer;
    border-radius: 4px;
}

.toolbar-button<span class="pl-s">:</span><span class="pl-en">hover</span> {
    background-color: <span class="pl-s">#<span class="pl-corl">444</span></span>;
}

#bottom-toolbar {
    padding: 8px 0;
    background-color: <span class="pl-s">#<span class="pl-corl">333</span></span>;
    margin-top: auto;
}

.footer-tabs {
    display: flex;
    justify-content: center;
}

.tab-button {
    border: none;
    color: #ddd;
    background: none;
    padding: 8px 16px;
    cursor: pointer;
}

.tab-button.active {
    color: white;
    font-weight: bold;
}

/<span class="pl-s">*</span> ä¾¿ç­¾æ ‘æ ·å¼ <span class="pl-s">*</span>/
#notes-container {
    padding: 20px;
    background-color: white;
    border-radius: 8px;
    margin: 20px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.note-item {
    margin-bottom: 10px;
}

.folder-header {
    padding: 8px 12px;
    background-color: #f0f0f0;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
}

.folder-header<span class="pl-s">:</span><span class="pl-en">hover</span> {
    background-color: #e0e0e0;
}

.folder-header .toggle-icon {
    transition: transform 0.2s;
}

.folder-header.open .toggle-icon {
    transform: rotate(90deg);
}

.folder-children {
    padding-left: 20px;
    display: none;
}

.folder-item.open &gt; .folder-children {
    display: block;
}

.note-content {
    padding: 8px 12px;
    background-color: #f9f9f9;
    border-radius: 4px;
    margin-top: 4px;
    cursor: pointer;
}

.note-content<span class="pl-s">:</span><span class="pl-en">hover</span> {
    background-color: #f0f0f0;
}

/<span class="pl-s">*</span> æ¨¡æ€æ¡†æ ·å¼ <span class="pl-s">*</span>/
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    width: 80%;
    max-width: 500px;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.modal-actions button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#save-edit-btn {
    background-color: #4CAF50;
    color: white;
}

#cancel-edit-btn {
    background-color: #f44336;
    color: white;
}

.hidden {
    display: none !important;
}</pre></div>
<h2>3. JavaScript å®ç° (notesPlugin.js)</h2>
<div class="highlight highlight-text-md"><pre class="notranslate">class NotesPlugin {
    constructor() {
        this.notes = <span class="pl-s">[</span><span class="pl-s">]</span>;
        this.currentEditId = null;
        this.githubToken = null;
        this.githubRepo = null;
        this.githubFilePath = 'data/notes.json';

    <span class="pl-c1">    this.initElements();</span>
    <span class="pl-c1">    this.loadNotes();</span>
    <span class="pl-c1">    this.renderNotes();</span>
    <span class="pl-c1">    this.setupEventListeners();</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">initElements() {</span>
    <span class="pl-c1">    this.notesContainer = document.getElementById('notes-container');</span>
    <span class="pl-c1">    this.addFolderBtn = document.getElementById('add-folder-btn');</span>
    <span class="pl-c1">    this.addNoteBtn = document.getElementById('add-note-btn');</span>
    <span class="pl-c1">    this.syncGithubBtn = document.getElementById('sync-github-btn');</span>
    <span class="pl-c1">    this.editModal = document.getElementById('edit-modal');</span>
    <span class="pl-c1">    this.editTitle = document.getElementById('edit-title');</span>
    <span class="pl-c1">    this.editContent = document.getElementById('edit-content');</span>
    <span class="pl-c1">    this.saveEditBtn = document.getElementById('save-edit-btn');</span>
    <span class="pl-c1">    this.cancelEditBtn = document.getElementById('cancel-edit-btn');</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">setupEventListeners() {</span>
    <span class="pl-c1">    this.addFolderBtn.addEventListener('click', () =&gt; this.addNewFolder());</span>
    <span class="pl-c1">    this.addNoteBtn.addEventListener('click', () =&gt; this.addNewNote());</span>
    <span class="pl-c1">    this.syncGithubBtn.addEventListener('click', () =&gt; this.syncWithGitHub());</span>
    <span class="pl-c1">    this.saveEditBtn.addEventListener('click', () =&gt; this.saveEdit());</span>
    <span class="pl-c1">    this.cancelEditBtn.addEventListener('click', () =&gt; this.closeEditModal());</span>

    <span class="pl-c1">    // é¦–æ¬¡ä½¿ç”¨æ—¶è®¾ç½® GitHub ä¿¡æ¯</span>
    <span class="pl-c1">    if (!localStorage.getItem('githubConfigured')) {</span>
    <span class="pl-c1">        this.promptGitHubConfig();</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">promptGitHubConfig() {</span>
    <span class="pl-c1">    const token = prompt('è¯·è¾“å…¥ GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œ (Personal Access Token):');</span>
    <span class="pl-c1">    const repo = prompt('è¯·è¾“å…¥ GitHub ä»“åº“ (æ ¼å¼: username/repo):');</span>

    <span class="pl-c1">    if (token &amp;&amp; repo) {</span>
    <span class="pl-c1">        this.githubToken = token;</span>
    <span class="pl-c1">        this.githubRepo = repo;</span>
    <span class="pl-c1">        localStorage.setItem('githubToken', token);</span>
    <span class="pl-c1">        localStorage.setItem('githubRepo', repo);</span>
    <span class="pl-c1">        localStorage.setItem('githubConfigured', 'true');</span>
    <span class="pl-c1">        alert('GitHub é…ç½®å·²ä¿å­˜ï¼');</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">// æ•°æ®å­˜å‚¨æ–¹æ³•</span>
    <span class="pl-c1">loadNotes() {</span>
    <span class="pl-c1">    // ä» localStorage åŠ è½½</span>
    <span class="pl-c1">    const localNotes = localStorage.getItem('notes');</span>
    <span class="pl-c1">    if (localNotes) {</span>
    <span class="pl-c1">        this.notes = JSON.parse(localNotes);</span>
    <span class="pl-c1">        return;</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®</span>
    <span class="pl-c1">    this.notes = [</span>
    <span class="pl-c1">        {</span>
    <span class="pl-c1">            id: '1',</span>
    <span class="pl-c1">            title: 'å·¥ä½œ',</span>
    <span class="pl-c1">            type: 'folder',</span>
    <span class="pl-c1">            children: [</span>
    <span class="pl-c1">                {</span>
    <span class="pl-c1">                    id: '1-1',</span>
    <span class="pl-c1">                    title: 'é¡¹ç›®A',</span>
    <span class="pl-c1">                    type: 'note',</span>
    <span class="pl-c1">                    content: 'é¡¹ç›®Açš„ä»»åŠ¡åˆ—è¡¨...'</span>
    <span class="pl-c1">                }</span>
    <span class="pl-c1">            ],</span>
    <span class="pl-c1">            isOpen: true</span>
    <span class="pl-c1">        },</span>
    <span class="pl-c1">        {</span>
    <span class="pl-c1">            id: '2',</span>
    <span class="pl-c1">            title: 'ä¸ªäºº',</span>
    <span class="pl-c1">            type: 'folder',</span>
    <span class="pl-c1">            children: [],</span>
    <span class="pl-c1">            isOpen: false</span>
    <span class="pl-c1">        }</span>
    <span class="pl-c1">    ];</span>

    <span class="pl-c1">    this.saveNotesToLocal();</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">saveNotesToLocal() {</span>
    <span class="pl-c1">    localStorage.setItem('notes', JSON.stringify(this.notes));</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">// GitHub åŒæ­¥æ–¹æ³•</span>
    <span class="pl-c1">async syncWithGitHub() {</span>
    <span class="pl-c1">    if (!this.githubToken || !this.githubRepo) {</span>
    <span class="pl-c1">        this.promptGitHubConfig();</span>
    <span class="pl-c1">        return;</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    try {</span>
    <span class="pl-c1">        // 1. å°è¯•è·å–ç°æœ‰æ–‡ä»¶ SHA</span>
    <span class="pl-c1">        const sha = await this.getGitHubFileSHA();</span>

    <span class="pl-c1">        // 2. ä¸Šä¼ æ–°å†…å®¹</span>
    <span class="pl-c1">        await this.uploadToGitHub(sha);</span>

    <span class="pl-c1">        alert('åŒæ­¥åˆ° GitHub æˆåŠŸï¼');</span>
    <span class="pl-c1">    } catch (error) {</span>
    <span class="pl-c1">        console.error('åŒæ­¥å¤±è´¥:', error);</span>
    <span class="pl-c1">        alert(`åŒæ­¥å¤±è´¥: ${error.message}`);</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">async getGitHubFileSHA() {</span>
    <span class="pl-c1">    const url = `https://api.github.com/repos/${this.githubRepo}/contents/${this.githubFilePath}`;</span>
    <span class="pl-c1">    const response = await fetch(url, {</span>
    <span class="pl-c1">        headers: {</span>
    <span class="pl-c1">            'Authorization': `token ${this.githubToken}`,</span>
    <span class="pl-c1">            'Accept': 'application/vnd.github.v3+json'</span>
    <span class="pl-c1">        }</span>
    <span class="pl-c1">    });</span>

    <span class="pl-c1">    if (response.status === 404) {</span>
    <span class="pl-c1">        return null; // æ–‡ä»¶ä¸å­˜åœ¨</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    if (!response.ok) {</span>
    <span class="pl-c1">        throw new Error(`è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥: ${response.status}`);</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    const data = await response.json();</span>
    <span class="pl-c1">    return data.sha;</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">async uploadToGitHub(sha) {</span>
    <span class="pl-c1">    const url = `https://api.github.com/repos/${this.githubRepo}/contents/${this.githubFilePath}`;</span>
    <span class="pl-c1">    const content = btoa(unescape(encodeURIComponent(JSON.stringify(this.notes, null, 2)));</span>

    <span class="pl-c1">    const response = await fetch(url, {</span>
    <span class="pl-c1">        method: 'PUT',</span>
    <span class="pl-c1">        headers: {</span>
    <span class="pl-c1">            'Authorization': `token ${this.githubToken}`,</span>
    <span class="pl-c1">            'Accept': 'application/vnd.github.v3+json',</span>
    <span class="pl-c1">            'Content-Type': 'application/json'</span>
    <span class="pl-c1">        },</span>
    <span class="pl-c1">        body: JSON.stringify({</span>
    <span class="pl-c1">            message: 'Update notes via web app',</span>
    <span class="pl-c1">            content: content,</span>
    <span class="pl-c1">            sha: sha || undefined</span>
    <span class="pl-c1">        })</span>
    <span class="pl-c1">    });</span>

    <span class="pl-c1">    if (!response.ok) {</span>
    <span class="pl-c1">        throw new Error(`ä¸Šä¼ å¤±è´¥: ${response.status}`);</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">// ä¾¿ç­¾æ“ä½œæ–¹æ³•</span>
    <span class="pl-c1">addNewFolder(parentId = null) {</span>
    <span class="pl-c1">    const newFolder = {</span>
    <span class="pl-c1">        id: this.generateId(parentId),</span>
    <span class="pl-c1">        title: 'æ–°å»ºæ–‡ä»¶å¤¹',</span>
    <span class="pl-c1">        type: 'folder',</span>
    <span class="pl-c1">        children: [],</span>
    <span class="pl-c1">        isOpen: true</span>
    <span class="pl-c1">    };</span>

    <span class="pl-c1">    if (parentId) {</span>
    <span class="pl-c1">        const parent = this.findNoteById(parentId);</span>
    <span class="pl-c1">        if (parent &amp;&amp; parent.type === 'folder') {</span>
    <span class="pl-c1">            parent.children.push(newFolder);</span>
    <span class="pl-c1">        }</span>
    <span class="pl-c1">    } else {</span>
    <span class="pl-c1">        this.notes.push(newFolder);</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    this.saveAndRender();</span>
    <span class="pl-c1">    this.editNote(newFolder.id);</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">addNewNote(parentId = null) {</span>
    <span class="pl-c1">    const newNote = {</span>
    <span class="pl-c1">        id: this.generateId(parentId),</span>
    <span class="pl-c1">        title: 'æ–°å»ºä¾¿ç­¾',</span>
    <span class="pl-c1">        type: 'note',</span>
    <span class="pl-c1">        content: ''</span>
    <span class="pl-c1">    };</span>

    <span class="pl-c1">    if (parentId) {</span>
    <span class="pl-c1">        const parent = this.findNoteById(parentId);</span>
    <span class="pl-c1">        if (parent &amp;&amp; parent.type === 'folder') {</span>
    <span class="pl-c1">            parent.children.push(newNote);</span>
    <span class="pl-c1">        }</span>
    <span class="pl-c1">    } else {</span>
    <span class="pl-c1">        this.notes.push(newNote);</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    this.saveAndRender();</span>
    <span class="pl-c1">    this.editNote(newNote.id);</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">generateId(parentId = null) {</span>
    <span class="pl-c1">    const timestamp = Date.now().toString(36);</span>
    <span class="pl-c1">    const random = Math.random().toString(36).substring(2, 6);</span>
    <span class="pl-c1">    return parentId ? `${parentId}-${timestamp}${random}` : `${timestamp}${random}`;</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">findNoteById(id, notes = this.notes) {</span>
    <span class="pl-c1">    for (const note of notes) {</span>
    <span class="pl-c1">        if (note.id === id) return note;</span>
    <span class="pl-c1">        if (note.type === 'folder' &amp;&amp; note.children) {</span>
    <span class="pl-c1">            const found = this.findNoteById(id, note.children);</span>
    <span class="pl-c1">            if (found) return found;</span>
    <span class="pl-c1">        }</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">    return null;</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">// æ¸²æŸ“æ–¹æ³•</span>
    <span class="pl-c1">renderNotes() {</span>
    <span class="pl-c1">    this.notesContainer.innerHTML = '';</span>
    <span class="pl-c1">    this.notes.forEach(note =&gt; this.renderNoteItem(note));</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">renderNoteItem(note, depth = 0) {</span>
    <span class="pl-c1">    const item = document.createElement('div');</span>
    <span class="pl-c1">    item.className = `note-item ${note.type}-item`;</span>
    <span class="pl-c1">    item.dataset.id = note.id;</span>

    <span class="pl-c1">    if (note.type === 'folder') {</span>
    <span class="pl-c1">        item.innerHTML = `</span>
    <span class="pl-c1">            &lt;div class="folder-header ${note.isOpen ? 'open' : ''}" onclick="notesPlugin.toggleFolder('${note.id}')"&gt;</span>
    <span class="pl-c1">                &lt;span class="toggle-icon"&gt;â–¶&lt;/span&gt;</span>
    <span class="pl-c1">                &lt;span class="folder-title"&gt;ğŸ“ ${note.title}&lt;/span&gt;</span>
    <span class="pl-c1">                &lt;button class="add-note-btn" onclick="notesPlugin.addNewNote('${note.id}'); event.stopPropagation()"&gt;+&lt;/button&gt;</span>
    <span class="pl-c1">                &lt;button class="edit-btn" onclick="notesPlugin.editNote('${note.id}'); event.stopPropagation()"&gt;âœï¸&lt;/button&gt;</span>
    <span class="pl-c1">                &lt;button class="delete-btn" onclick="notesPlugin.deleteNote('${note.id}'); event.stopPropagation()"&gt;ğŸ—‘ï¸&lt;/button&gt;</span>
    <span class="pl-c1">            &lt;/div&gt;</span>
    <span class="pl-c1">            &lt;div class="folder-children" style="display: ${note.isOpen ? 'block' : 'none'}"&gt;</span>
    <span class="pl-c1">                ${note.children.map(child =&gt; this.renderNoteItem(child, depth + 1).outerHTML).join('')}</span>
    <span class="pl-c1">            &lt;/div&gt;</span>
    <span class="pl-c1">        `;</span>
    <span class="pl-c1">    } else {</span>
    <span class="pl-c1">        item.innerHTML = `</span>
    <span class="pl-c1">            &lt;div class="note-content" onclick="notesPlugin.editNote('${note.id}')"&gt;</span>
    <span class="pl-c1">                &lt;strong&gt;ğŸ“ ${note.title}&lt;/strong&gt;</span>
    <span class="pl-c1">                &lt;p&gt;${note.content.substring(0, 50)}${note.content.length &gt; 50 ? '...' : ''}&lt;/p&gt;</span>
    <span class="pl-c1">            &lt;/div&gt;</span>
    <span class="pl-c1">        `;</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    return item;</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">// äº¤äº’æ–¹æ³•</span>
    <span class="pl-c1">toggleFolder(id) {</span>
    <span class="pl-c1">    const note = this.findNoteById(id);</span>
    <span class="pl-c1">    if (note &amp;&amp; note.type === 'folder') {</span>
    <span class="pl-c1">        note.isOpen = !note.isOpen;</span>
    <span class="pl-c1">        this.saveAndRender();</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">editNote(id) {</span>
    <span class="pl-c1">    const note = this.findNoteById(id);</span>
    <span class="pl-c1">    if (!note) return;</span>

    <span class="pl-c1">    this.currentEditId = id;</span>
    <span class="pl-c1">    this.editTitle.value = note.title;</span>
    <span class="pl-c1">    this.editContent.value = note.type === 'note' ? note.content : '';</span>
    <span class="pl-c1">    this.editModal.classList.remove('hidden');</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">saveEdit() {</span>
    <span class="pl-c1">    const note = this.findNoteById(this.currentEditId);</span>
    <span class="pl-c1">    if (!note) return;</span>

    <span class="pl-c1">    note.title = this.editTitle.value;</span>
    <span class="pl-c1">    if (note.type === 'note') {</span>
    <span class="pl-c1">        note.content = this.editContent.value;</span>
    <span class="pl-c1">    }</span>

    <span class="pl-c1">    this.closeEditModal();</span>
    <span class="pl-c1">    this.saveAndRender();</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">closeEditModal() {</span>
    <span class="pl-c1">    this.editModal.classList.add('hidden');</span>
    <span class="pl-c1">    this.currentEditId = null;</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">deleteNote(id) {</span>
    <span class="pl-c1">    if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿ')) return;</span>

    <span class="pl-c1">    // ä»æ ¹æ•°ç»„æˆ–çˆ¶æ–‡ä»¶å¤¹ä¸­åˆ é™¤</span>
    <span class="pl-c1">    const deleteFromArray = (array) =&gt; {</span>
    <span class="pl-c1">        const index = array.findIndex(n =&gt; n.id === id);</span>
    <span class="pl-c1">        if (index !== -1) {</span>
    <span class="pl-c1">            array.splice(index, 1);</span>
    <span class="pl-c1">            return true;</span>
    <span class="pl-c1">        }</span>

    <span class="pl-c1">        for (const item of array) {</span>
    <span class="pl-c1">            if (item.type === 'folder' &amp;&amp; item.children) {</span>
    <span class="pl-c1">                if (deleteFromArray(item.children)) {</span>
    <span class="pl-c1">                    return true;</span>
    <span class="pl-c1">                }</span>
    <span class="pl-c1">            }</span>
    <span class="pl-c1">        }</span>

    <span class="pl-c1">        return false;</span>
    <span class="pl-c1">    };</span>

    <span class="pl-c1">    if (deleteFromArray(this.notes)) {</span>
    <span class="pl-c1">        this.saveAndRender();</span>
    <span class="pl-c1">    }</span>
    <span class="pl-c1">}</span>

    <span class="pl-c1">saveAndRender() {</span>
    <span class="pl-c1">    this.saveNotesToLocal();</span>
    <span class="pl-c1">    this.renderNotes();</span>
    <span class="pl-c1">}</span>
}

// åˆå§‹åŒ–æ’ä»¶
const notesPlugin = new NotesPlugin();
window.notesPlugin = notesPlugin; // æš´éœ²ç»™å…¨å±€ä»¥ä¾¿HTMLè°ƒç”¨</pre></div>
<h2>åŠŸèƒ½è¯´æ˜</h2>
<ol>
<li>
<p><strong>æœ¬åœ°å­˜å‚¨</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code class="notranslate">localStorage</code> ä¿å­˜ä¾¿ç­¾æ•°æ®</li>
<li>æ”¯æŒæ–‡ä»¶å¤¹å’Œä¾¿ç­¾ä¸¤ç§ç±»å‹</li>
<li>è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ›´æ”¹</li>
</ul>
</li>
<li>
<p><strong>GitHub åŒæ­¥</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ GitHub API åŒæ­¥æ•°æ®</li>
<li>éœ€è¦é…ç½® GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œå’Œä»“åº“</li>
<li>è‡ªåŠ¨å¤„ç†æ–‡ä»¶åˆ›å»ºå’Œæ›´æ–°</li>
</ul>
</li>
<li>
<p><strong>å±‚çº§ç»“æ„</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ— é™å±‚çº§åµŒå¥—</li>
<li>æ–‡ä»¶å¤¹å¯ä»¥åŒ…å«å…¶ä»–æ–‡ä»¶å¤¹æˆ–ä¾¿ç­¾</li>
<li>æ¯ä¸ªé¡¹ç›®æœ‰å”¯ä¸€ ID</li>
</ul>
</li>
<li>
<p><strong>æŠ˜å åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>ç‚¹å‡»æ–‡ä»¶å¤¹æ ‡é¢˜åˆ‡æ¢å±•å¼€/æŠ˜å çŠ¶æ€</li>
<li>ä¿å­˜æŠ˜å çŠ¶æ€</li>
<li>æ”¯æŒåœ¨æ–‡ä»¶å¤¹å†…æ–°å»ºé¡¹ç›®</li>
</ul>
</li>
<li>
<p><strong>ç¼–è¾‘åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>åŒå‡»é¡¹ç›®æˆ–ç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†</li>
<li>å®æ—¶ä¿å­˜æ›´æ”¹</li>
</ul>
</li>
<li>
<p><strong>UI äº¤äº’</strong>ï¼š</p>
<ul>
<li>å“åº”å¼è®¾è®¡</li>
<li>æ¸…æ™°çš„è§†è§‰å±‚æ¬¡</li>
<li>æ“ä½œæŒ‰é’®ç›´è§‚</li>
</ul>
</li>
</ol>
<h2>ä½¿ç”¨è¯´æ˜</h2>
<ol>
<li>é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦é…ç½® GitHub ä¿¡æ¯ï¼ˆä»¤ç‰Œå’Œä»“åº“ï¼‰</li>
<li>ç‚¹å‡»"æ–°å»ºæ–‡ä»¶å¤¹"æˆ–"æ–°å»ºä¾¿ç­¾"æ·»åŠ é¡¹ç›®</li>
<li>ç‚¹å‡»æ–‡ä»¶å¤¹æ ‡é¢˜å±•å¼€/æŠ˜å </li>
<li>ç‚¹å‡»ä¾¿ç­¾å†…å®¹è¿›è¡Œç¼–è¾‘</li>
<li>ä½¿ç”¨"åŒæ­¥åˆ° GitHub"æŒ‰é’®æ‰‹åŠ¨åŒæ­¥æ•°æ®</li>
</ol>
<p>è¿™ä¸ªå®ç°æä¾›äº†å®Œæ•´çš„ä¾¿ç­¾ç®¡ç†åŠŸèƒ½ï¼Œé€‚åˆä¸ªäººä½¿ç”¨æˆ–å°å‹å›¢é˜Ÿåä½œã€‚</p>
<p>è¿™æ˜¯ç‹¬ç«‹é¡¹ç›®è¿˜æ˜¯å¯ä»¥èå…¥åŸæ¥ä¹¦ç­¾é¡¹ç›®çš„æ’ä»¶ï¼Ÿå…·ä½“å¦‚ä½•ä½¿ç”¨ï¼Ÿ</p>
<p>è¿™ä¸ªå®ç°æ—¢å¯ä»¥ä½œä¸ºç‹¬ç«‹é¡¹ç›®è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ’ä»¶é›†æˆåˆ°åŸæœ‰çš„ä¹¦ç­¾ç®¡ç†é¡¹ç›®ä¸­ã€‚ä»¥ä¸‹æ˜¯å…·ä½“çš„ä½¿ç”¨æ–¹å¼å’Œé›†æˆæ–¹æ³•ï¼š</p>
<hr>
<h2><strong>1. ä½œä¸ºç‹¬ç«‹é¡¹ç›®ä½¿ç”¨</strong></h2>
<h3><strong>ä½¿ç”¨æ­¥éª¤</strong></h3>
<ol>
<li>
<p><strong>åˆ›å»ºé¡¹ç›®æ–‡ä»¶</strong>ï¼š</p>
<ul>
<li><code class="notranslate">index.html</code> (ä¸»é¡µé¢)</li>
<li><code class="notranslate">style.css</code> (æ ·å¼)</li>
<li><code class="notranslate">notesPlugin.js</code> (æ ¸å¿ƒé€»è¾‘)</li>
<li><code class="notranslate">icon.png</code> (å¯é€‰ï¼Œå·¥å…·æ å›¾æ ‡)</li>
</ul>
</li>
<li>
<p><strong>ç›´æ¥è¿è¡Œ</strong>ï¼š</p>
<ul>
<li>æ‰“å¼€ <code class="notranslate">index.html</code> å³å¯åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨</li>
<li>æ•°æ®ä¼šä¿å­˜åœ¨æµè§ˆå™¨çš„ <code class="notranslate">localStorage</code> ä¸­</li>
</ul>
</li>
<li>
<p><strong>é…ç½® GitHub åŒæ­¥</strong>ï¼š</p>
<ul>
<li>é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè¾“å…¥ GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œå’Œä»“åº“ä¿¡æ¯</li>
<li>ä¹‹åç‚¹å‡» "åŒæ­¥åˆ° GitHub" æŒ‰é’®æ‰‹åŠ¨åŒæ­¥</li>
</ul>
</li>
</ol>
<hr>
<h2><strong>2. ä½œä¸ºæ’ä»¶é›†æˆåˆ°åŸæœ‰ä¹¦ç­¾é¡¹ç›®</strong></h2>
<h3><strong>é›†æˆæ­¥éª¤</strong></h3>
<h4><strong>(1) æ–‡ä»¶åˆå¹¶</strong></h4>
<ol>
<li>
<p><strong>CSS æ•´åˆ</strong>ï¼š</p>
<ul>
<li>å°† <code class="notranslate">style.css</code> ä¸­çš„æ ·å¼åˆå¹¶åˆ°åŸé¡¹ç›®çš„ CSS æ–‡ä»¶ä¸­</li>
<li>æ³¨æ„é¿å…ç±»åå†²çªï¼ˆå¯ä»¥æ·»åŠ å‰ç¼€å¦‚ <code class="notranslate">.notes-</code>ï¼‰</li>
</ul>
</li>
<li>
<p><strong>HTML ç»“æ„</strong>ï¼š</p>
<ul>
<li>åœ¨åŸé¡¹ç›®çš„ HTML ä¸­æ·»åŠ ä¾¿ç­¾çš„å®¹å™¨ï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate">&lt;<span class="pl-ent">section</span> <span class="pl-e">id</span>=<span class="pl-s">"</span><span class="pl-s">notes-section</span><span class="pl-s">"</span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s">"</span><span class="pl-s">notes-container</span><span class="pl-s">"</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
  <span class="pl-c"><span class="pl-c">&lt;!--</span> åŸæœ‰ä¹¦ç­¾å†…å®¹ <span class="pl-c">--&gt;</span></span>
&lt;/<span class="pl-ent">section</span>&gt;</pre></div>
</li>
<li>
<p><strong>JavaScript é›†æˆ</strong>ï¼š</p>
<ul>
<li>å°† <code class="notranslate">notesPlugin.js</code> åˆå¹¶åˆ°åŸé¡¹ç›®çš„ JS ä¸­</li>
<li>æˆ–è€…ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate">import NotesPlugin from './notesPlugin.js';
const notesPlugin = new NotesPlugin();</pre></div>
</li>
</ol>
<h4><strong>(2) åŠŸèƒ½æ•´åˆ</strong></h4>
<ol>
<li>
<p><strong>å…±äº«æ•°æ®å­˜å‚¨</strong>ï¼š</p>
<ul>
<li>å¦‚æœåŸé¡¹ç›®å·²ä½¿ç”¨ <code class="notranslate">localStorage</code>ï¼Œå¯ä»¥åˆå¹¶å­˜å‚¨ç»“æ„ï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate">// ç¤ºä¾‹åˆå¹¶åçš„æ•°æ®ç»“æ„
const appData = {
  bookmarks: <span class="pl-s">[</span>...<span class="pl-s">]</span>, // åŸæœ‰ä¹¦ç­¾æ•°æ®
  notes: <span class="pl-s">[</span>...<span class="pl-s">]</span>     // æ–°ä¾¿ç­¾æ•°æ®
};</pre></div>
</li>
<li>
<p><strong>UI æ•´åˆ</strong>ï¼š</p>
<ul>
<li>åœ¨åŸæœ‰å·¥å…·æ æ·»åŠ ä¾¿ç­¾ç›¸å…³æŒ‰é’®ï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate">&lt;<span class="pl-ent">button</span> <span class="pl-e">id</span>=<span class="pl-s">"</span><span class="pl-s">show-notes-btn</span><span class="pl-s">"</span>&gt;ğŸ“ ä¾¿ç­¾&lt;/<span class="pl-ent">button</span>&gt;</pre></div>
<ul>
<li>é€šè¿‡äº‹ä»¶åˆ‡æ¢æ˜¾ç¤ºï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate">document.getElementById('show-notes-btn').addEventListener('click', () =&gt; {
  document.getElementById('bookmarks-section').classList.add('hidden');
  document.getElementById('notes-section').classList.remove('hidden');
});</pre></div>
</li>
</ol>
<h4><strong>(3) åŒæ­¥é€»è¾‘å¤ç”¨</strong></h4>
<ul>
<li>å¦‚æœåŸé¡¹ç›®å·²æœ‰ GitHub åŒæ­¥åŠŸèƒ½ï¼Œå¯ä»¥å¤ç”¨ API è°ƒç”¨é€»è¾‘ï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate">// å…±äº«åŒæ­¥æ–¹æ³•
async function syncAllToGitHub() {
  await syncBookmarks(); // åŸæœ‰ä¹¦ç­¾åŒæ­¥
  await notesPlugin.syncWithGitHub(); // ä¾¿ç­¾åŒæ­¥
}</pre></div>
<hr>
<h2><strong>3. å…³é”®é›†æˆç‚¹</strong></h2>
<h3><strong>(1) æ•°æ®éš”ç¦»</strong></h3>
<ul>
<li>
<p><strong>ç‹¬ç«‹å­˜å‚¨</strong>ï¼ˆæ¨èåˆå­¦è€…ï¼‰ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">// ä¾¿ç­¾æ•°æ®ç‹¬ç«‹å­˜å‚¨
localStorage.setItem('notes', JSON.stringify(notes));
// ä¹¦ç­¾æ•°æ®ç‹¬ç«‹å­˜å‚¨
localStorage.setItem('bookmarks', JSON.stringify(bookmarks));</pre></div>
</li>
<li>
<p><strong>ç»Ÿä¸€å­˜å‚¨</strong>ï¼ˆè¿›é˜¶ï¼‰ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">const allData = {
  version: 1,
  bookmarks: <span class="pl-s">[</span>...<span class="pl-s">]</span>,
  notes: <span class="pl-s">[</span>...<span class="pl-s">]</span>
};
localStorage.setItem('appData', JSON.stringify(allData));</pre></div>
</li>
</ul>
<h3><strong>(2) æ ·å¼å†²çªå¤„ç†</strong></h3>
<p>åœ¨åŸæœ‰ CSS ä¸­æ·»åŠ å‘½åç©ºé—´ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">/<span class="pl-s">*</span> ä¾¿ç­¾ä¸“å±æ ·å¼ <span class="pl-s">*</span>/
.notes-container { /<span class="pl-s">*</span>...<span class="pl-s">*</span>/ }
.notes-folder-header { /<span class="pl-s">*</span>...<span class="pl-s">*</span>/ }

/<span class="pl-s">*</span> ä¹¦ç­¾ä¸“å±æ ·å¼ <span class="pl-s">*</span>/
.bookmarks-container { /<span class="pl-s">*</span>...<span class="pl-s">*</span>/ }</pre></div>
<h3><strong>(3) äº¤äº’é€»è¾‘</strong></h3>
<ul>
<li>
<p><strong>åˆ‡æ¢æ ‡ç­¾é¡µ</strong>ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">function showTab(tabName) {
  // éšè—æ‰€æœ‰
  document.querySelectorAll('main &gt; section').forEach(s =&gt; {
    s.classList.remove('active');
  });
  // æ˜¾ç¤ºç›®æ ‡
  document.getElementById(<span class="pl-s">`</span><span class="pl-c1">${tabName}-section</span><span class="pl-s">`</span>).classList.add('active');
}</pre></div>
</li>
<li>
<p><strong>å…±äº« GitHub é…ç½®</strong>ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">// ä»åŸé¡¹ç›®è¯»å–é…ç½®
notesPlugin.githubToken = bookmarkApp.githubToken;
notesPlugin.githubRepo = bookmarkApp.githubRepo;</pre></div>
</li>
</ul>
<hr>
<h2><strong>4. ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</strong></h2>
<h3><strong>åœºæ™¯1ï¼šå¿«é€Ÿç‹¬ç«‹ä½¿ç”¨</strong></h3>
<ol>
<li>ä¸‹è½½ä¸‰ä¸ªæ–‡ä»¶ï¼ˆHTML/CSS/JSï¼‰</li>
<li>ç›´æ¥æ‰“å¼€ <code class="notranslate">index.html</code></li>
<li>å¼€å§‹è®°å½•ä¾¿ç­¾ï¼Œæ•°æ®ä¿å­˜åœ¨æœ¬åœ°</li>
</ol>
<h3><strong>åœºæ™¯2ï¼šé›†æˆåˆ°ä¹¦ç­¾é¡¹ç›®</strong></h3>
<ol>
<li>
<p>å°†ä¾¿ç­¾ä»£ç åˆå¹¶åˆ°åŸé¡¹ç›®</p>
</li>
<li>
<p>æ·»åŠ åˆ‡æ¢æŒ‰é’®ï¼š</p>
<div class="highlight highlight-text-md"><pre class="notranslate">&lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s">"</span><span class="pl-s">tab-buttons</span><span class="pl-s">"</span>&gt;
  &lt;<span class="pl-ent">button</span> <span class="pl-e">onclick</span>=<span class="pl-s">"</span><span class="pl-s"><span class="pl-en">showTab</span>(<span class="pl-s"><span class="pl-pds">'</span>bookmarks<span class="pl-pds">'</span></span>)</span><span class="pl-s">"</span>&gt;ä¹¦ç­¾&lt;/<span class="pl-ent">button</span>&gt;
  &lt;<span class="pl-ent">button</span> <span class="pl-e">onclick</span>=<span class="pl-s">"</span><span class="pl-s"><span class="pl-en">showTab</span>(<span class="pl-s"><span class="pl-pds">'</span>notes<span class="pl-pds">'</span></span>)</span><span class="pl-s">"</span>&gt;ä¾¿ç­¾&lt;/<span class="pl-ent">button</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>
</li>
<li>
<p>å®ç°æ•°æ®åŒæ­¥è”åŠ¨</p>
</li>
</ol>
<hr>
<h2><strong>5. æ³¨æ„äº‹é¡¹</strong></h2>
<ol>
<li>
<p><strong>GitHub API é™åˆ¶</strong>ï¼š</p>
<ul>
<li>ä¸ªäººè®¿é—®ä»¤ç‰Œéœ€è¦ <code class="notranslate">repo</code> æƒé™</li>
<li>æ¯å°æ—¶æœ€å¤š 60 æ¬¡ API è°ƒç”¨ï¼ˆæœªè®¤è¯ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ç§»åŠ¨ç«¯é€‚é…</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿æŠ˜å æŒ‰é’®å¤§å°é€‚åˆè§¦æ‘¸æ“ä½œ</li>
<li>æ·»åŠ å“åº”å¼å¸ƒå±€ï¼š</li>
</ul>
<div class="highlight highlight-text-md"><pre class="notranslate"><span class="pl-s">@<span class="pl-corl">media</span></span> (max-width: 600px) {
  .folder-header { padding: 12px; }
}</pre></div>
</li>
<li>
<p><strong>æ•°æ®å¤‡ä»½</strong>ï¼š</p>
<ul>
<li>å³ä½¿ä½¿ç”¨ GitHub åŒæ­¥ï¼Œä¹Ÿå»ºè®®å®šæœŸå¯¼å‡ºæœ¬åœ°å¤‡ä»½</li>
</ul>
</li>
<li>
<p><strong>å†²çªå¤„ç†</strong>ï¼š</p>
<ul>
<li>å¦‚æœå¤šè®¾å¤‡åŒæ—¶ç¼–è¾‘ï¼Œå»ºè®®å®ç°ç®€å•çš„ "æœ€åä¿®æ”¹ä¼˜å…ˆ" ç­–ç•¥</li>
</ul>
</li>
</ol>
<hr>
<p>é€šè¿‡ä»¥ä¸Šæ–¹å¼ï¼Œä½ å¯ä»¥çµæ´»é€‰æ‹©ç‹¬ç«‹ä½¿ç”¨ä¾¿ç­¾åŠŸèƒ½ï¼Œæˆ–å°†å…¶æ— ç¼é›†æˆåˆ°åŸæœ‰ä¹¦ç­¾ç®¡ç†ç³»ç»Ÿä¸­ã€‚ä¸¤ç§æ–¹å¼å‡ä¿ç•™äº†å®Œæ•´çš„å±‚çº§ç»“æ„å’Œ GitHub åŒæ­¥èƒ½åŠ›ã€‚</p></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">è¯„è®º</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright Â© <span id="copyrightYear"></span> <a href="https://mgt.xx.kg">MGTime</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>
<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("01/01/2025"!=""){
    var startSite=new Date("01/01/2025");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="ç½‘ç«™è¿è¡Œ"+diffDay+"å¤©"+" â€¢ ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.disabled=true;
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","fjvi/note");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script src='../assets/ArticleTOC.js'></script><script src='../assets/backtop.js'></script><script src='../assets/lightbox.js'></script><script src='../assets/imgca.js'></script>

</html>